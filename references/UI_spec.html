

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Narrative App UI Specification &mdash; KBase SDK 0.1.18 documentation</title>
  

  
  
  
  

  

  
  
    

  

  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/css/custom.css" type="text/css" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Terminology" href="terminology.html" />
    <link rel="prev" title="KIDL Specification" href="KIDL_spec.html" /> 

  
  <script src="../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../index.html" class="icon icon-home"> KBase SDK
          

          
            
            <img src="../_static/logo.png" class="logo" alt="Logo"/>
          
          </a>

          
            
            
              <div class="version">
                0.1
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Intro</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../overview.html">Concepts and Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../video_tutorial.html">Video Tutorial</a></li>
</ul>
<p class="caption"><span class="caption-text">Tutorial</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../tutorial/dependencies.html">1. Dependencies &amp; Prerequisites</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tutorial/install.html">2. Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tutorial/initialize.html">3. Initialize the Module</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tutorial/helloworld.html">4. Hello World Example</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tutorial/setup.html">5. ContigFilter Example</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tutorial/inputsoutputs.html">6. Narrative User Interface</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tutorial/implement.html">7. Implement Code</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tutorial/publish.html">8. Publish and Update</a></li>
</ul>
<p class="caption"><span class="caption-text">Developer Guides</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="questions_and_answers.html">Common Questions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../howtos/create_a_report.html">Creating reports</a></li>
<li class="toctree-l1"><a class="reference internal" href="../howtos/add_ui_elements.html">Adding UI Elements</a></li>
<li class="toctree-l1"><a class="reference internal" href="../howtos/edit_your_dockerfile.html">Editing your app’s Dockerfile</a></li>
<li class="toctree-l1"><a class="reference internal" href="../howtos/fill_out_app_information.html">Fully documenting your app</a></li>
<li class="toctree-l1"><a class="reference internal" href="../howtos/run_a_shell_command.html">Running shell commands</a></li>
<li class="toctree-l1"><a class="reference internal" href="../howtos/file_utils.html">Working with the file utils</a></li>
</ul>
<p class="caption"><span class="caption-text">Advanced Guides</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../howtos/workspace.html">Using Workspace Metadata</a></li>
<li class="toctree-l1"><a class="reference internal" href="../howtos/manual_build.html">Manually building the SDK</a></li>
<li class="toctree-l1"><a class="reference internal" href="../howtos/work_with_reference_data.html">Working with reference data</a></li>
<li class="toctree-l1"><a class="reference internal" href="../howtos/job_manager.html">Listing and viewing jobs</a></li>
<li class="toctree-l1"><a class="reference internal" href="../howtos/dynamic_services.html">Dynamic Services</a></li>
<li class="toctree-l1"><a class="reference internal" href="../howtos/update_to_py3.html">Updating a module to Python3</a></li>
</ul>
<p class="caption"><span class="caption-text">References &amp; Resources</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="module_anatomy.html">Anatomy of a Module</a></li>
<li class="toctree-l1"><a class="reference internal" href="troubleshooting.html">Troubleshooting Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="dev_guidelines.html">Developer Guidelines</a></li>
<li class="toctree-l1"><a class="reference internal" href="KIDL_spec.html">KIDL Specification</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Narrative App UI Specification</a></li>
<li class="toctree-l1"><a class="reference internal" href="terminology.html">Terminology</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">KBase SDK</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
      <li>Narrative App UI Specification</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            
              <a href="https://github.com/kbase/kb_sdk_docs/blob/blob/master/source/references/UI_spec.rst" class="fa fa-github"> Edit on GitHub</a>
            
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="narrative-app-ui-specification">
<h1><a class="toc-backref" href="#id3">Narrative App UI Specification</a><a class="headerlink" href="#narrative-app-ui-specification" title="Permalink to this headline">¶</a></h1>
<div class="contents topic" id="contents">
<p class="topic-title first">Contents</p>
<ul class="simple">
<li><a class="reference internal" href="#narrative-app-ui-specification" id="id3">Narrative App UI Specification</a><ul>
<li><a class="reference internal" href="#structure-of-the-folders-and-files" id="id4">Structure of the folders and files</a></li>
<li><a class="reference internal" href="#structural-file-spec-json" id="id5">Structural file: <code class="docutils literal notranslate"><span class="pre">spec.json</span></code></a><ul>
<li><a class="reference internal" href="#parameters-in-spec-json" id="id6">Parameters in <code class="docutils literal notranslate"><span class="pre">spec.json</span></code></a></li>
<li><a class="reference internal" href="#options-for-the-text-parameter-type-in-spec-json" id="id7">Options for the text parameter type in <code class="docutils literal notranslate"><span class="pre">spec.json</span></code></a></li>
<li><a class="reference internal" href="#options-for-the-drop-down-parameter-type-in-spec-json" id="id8">Options for the drop-down parameter type in <code class="docutils literal notranslate"><span class="pre">spec.json</span></code></a></li>
<li><a class="reference internal" href="#options-for-the-checkbox-parameter-type-in-spec-json" id="id9">Options for the checkbox parameter type in <code class="docutils literal notranslate"><span class="pre">spec.json</span></code></a></li>
<li><a class="reference internal" href="#options-for-the-textarea-parameter-type-in-spec-json" id="id10">Options for the textarea parameter type in <code class="docutils literal notranslate"><span class="pre">spec.json</span></code></a></li>
<li><a class="reference internal" href="#options-for-the-textsubdata-parameter-type-in-spec-json" id="id11">Options for the textsubdata parameter type in <code class="docutils literal notranslate"><span class="pre">spec.json</span></code></a></li>
<li><a class="reference internal" href="#options-for-the-dynamic-dropdown-in-spec-json" id="id12">Options for the dynamic_dropdown in <code class="docutils literal notranslate"><span class="pre">spec.json</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#parameter-groups-in-spec-json" id="id13">Parameter groups in <code class="docutils literal notranslate"><span class="pre">spec.json</span></code></a></li>
<li><a class="reference internal" href="#behavior-in-spec-json" id="id14">Behavior in <code class="docutils literal notranslate"><span class="pre">spec.json</span></code></a><ul>
<li><a class="reference internal" href="#example-of-mappings-in-spec-json" id="id15">Example of mappings in <code class="docutils literal notranslate"><span class="pre">spec.json</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#display-text-file-display-yaml" id="id16">Display Text file (<code class="docutils literal notranslate"><span class="pre">display.yaml</span></code>)</a></li>
</ul>
</li>
</ul>
</div>
<p>This document describes how the UI components of Narrative Apps are specified via fields in <code class="docutils literal notranslate"><span class="pre">spec.json</span></code> and <code class="docutils literal notranslate"><span class="pre">display.yaml</span></code> files. These spec files include input and output parameters for the app.</p>
<div class="section" id="structure-of-the-folders-and-files">
<h2><a class="toc-backref" href="#id4">Structure of the folders and files</a><a class="headerlink" href="#structure-of-the-folders-and-files" title="Permalink to this headline">¶</a></h2>
<p>In an SDK app’s repo, all UI method specifications live in the <code class="docutils literal notranslate"><span class="pre">ui/narrative/methods/</span></code> directory. Each method has its own subfolder with the name corresponding to the app or method ID. Inside this folder, a typical method has a <code class="docutils literal notranslate"><span class="pre">spec.json</span></code> file defining input/output parameters, a <code class="docutils literal notranslate"><span class="pre">display.yaml</span></code> file defining display text, and an <code class="docutils literal notranslate"><span class="pre">img</span></code> subfolder containing icon and screenshot files.</p>
</div>
<div class="section" id="structural-file-spec-json">
<h2><a class="toc-backref" href="#id5">Structural file: <code class="docutils literal notranslate"><span class="pre">spec.json</span></code></a><a class="headerlink" href="#structural-file-spec-json" title="Permalink to this headline">¶</a></h2>
<p>This is a file in JSON format containing these top-level properties:</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">ver:</th><td class="field-body">version of each UI method-spec</td>
</tr>
<tr class="field-even field"><th class="field-name">authors:</th><td class="field-body">list of GlobusOnline accounts of the contributors</td>
</tr>
<tr class="field-odd field"><th class="field-name">contact:</th><td class="field-body">e-mail of the contact person</td>
</tr>
<tr class="field-even field"><th class="field-name">categories:</th><td class="field-body">list of tags (from fixed set of supported tags) categorizing this method into
method should be made invisible, then the <code class="docutils literal notranslate"><span class="pre">inactive</span></code> category should be added to this list (in
place of the <code class="docutils literal notranslate"><span class="pre">active</span></code> category, if it’s present)</td>
</tr>
<tr class="field-odd field"><th class="field-name">widgets:</th><td class="field-body">structure defining <strong>input</strong> and <strong>output</strong> widgets. Typically the <strong>input</strong> widget is
set to null, meaning that the standard one is used. The <strong>output</strong> widget is frequently
the name of JavaScript viewer for the output object. See the <a href="https://github.com/kbase/narrative/tree/develop/kbase-extension/static/kbase/js/widgets" target="_blank">Narrative module widgets</a>
and its subdirectories for more widgets.</td>
</tr>
<tr class="field-even field"><th class="field-name">parameters:</th><td class="field-body">list of structures (described below) defining each parameter type and other features, except</td>
</tr>
<tr class="field-odd field"><th class="field-name">behavior:</th><td class="field-body">block of settings for mapping UI parameters to service function input parameters. Also
used for mapping output results returned from the service function to the input of the
visualizing widget that shows the results.</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">job_id_output_field:</th></tr>
<tr class="field-even field"><td>&#160;</td><td class="field-body">field for support of legacy code. For an SDK method, it should always be set
to the <code class="docutils literal notranslate"><span class="pre">docker</span></code> value</td>
</tr>
</tbody>
</table>
<div class="section" id="parameters-in-spec-json">
<h3><a class="toc-backref" href="#id6">Parameters in <code class="docutils literal notranslate"><span class="pre">spec.json</span></code></a><a class="headerlink" href="#parameters-in-spec-json" title="Permalink to this headline">¶</a></h3>
<p>Each item in the <code class="docutils literal notranslate"><span class="pre">parameters</span></code> array defines one parameter shown in the UI input panel of this method. The properties of each item are:</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">id:</th><td class="field-body">ID of a parameter, allowing you to reference it in <code class="docutils literal notranslate"><span class="pre">display.yaml</span></code> and from the mapping
settings of the <code class="docutils literal notranslate"><span class="pre">behavior</span></code> block</td>
</tr>
<tr class="field-even field"><th class="field-name">optional:</th><td class="field-body">flag defining whether the UI interface allows an empty value for this parameter or
requires the field to be set to something non-empty</td>
</tr>
<tr class="field-odd field"><th class="field-name">advanced:</th><td class="field-body">flag defining whether the UI interface should place this field in the “Advanced
Parameters” group, collapsed by default</td>
</tr>
<tr class="field-even field"><th class="field-name">allow_multiple:</th><td class="field-body">flag defining whether the UI interface allows you to define more than one value
for this parameter, treating these values as a list rather than a single
textual/numeric/boolean value</td>
</tr>
<tr class="field-odd field"><th class="field-name">default_values:</th><td class="field-body">if set to any non-empty string, this field will be preset with the string</td>
</tr>
<tr class="field-even field"><th class="field-name">field_type:</th><td class="field-body">type of the parameter; could be one of <code class="docutils literal notranslate"><span class="pre">text</span></code>, <code class="docutils literal notranslate"><span class="pre">dropdown</span></code>, <code class="docutils literal notranslate"><span class="pre">checkbox</span></code>,
<code class="docutils literal notranslate"><span class="pre">textarea</span></code>, <code class="docutils literal notranslate"><span class="pre">textsubdata</span></code>, or <code class="docutils literal notranslate"><span class="pre">dynamic_dropdown</span></code></td>
</tr>
<tr class="field-odd field"><th class="field-name">text_options:</th><td class="field-body">optional block defining details of the <code class="docutils literal notranslate"><span class="pre">text</span></code> type</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">dropdown_options:</th></tr>
<tr class="field-even field"><td>&#160;</td><td class="field-body">optional block defining details of the <code class="docutils literal notranslate"><span class="pre">dropdown</span></code> type -  <a href="https://github.com/kbaseapps/fba_tools/blob/master/ui/narrative/methods/build_metabolic_model/spec.json" target="_blank">Example</a></td>
</tr>
<tr class="field-odd field"><th class="field-name" colspan="2">checkbox_options:</th></tr>
<tr class="field-odd field"><td>&#160;</td><td class="field-body">optional block defining details of the <code class="docutils literal notranslate"><span class="pre">checkbox</span></code> type -  <a href="https://github.com/kbaseapps/fba_tools/blob/master/ui/narrative/methods/simulate_growth_on_phenotype_data/spec.json" target="_blank">Example</a></td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">textarea_options:</th></tr>
<tr class="field-even field"><td>&#160;</td><td class="field-body">optional block defining details of the <code class="docutils literal notranslate"><span class="pre">textarea</span></code> type -  <a href="https://github.com/kbaseapps/fba_tools/blob/master/ui/narrative/methods/build_multiple_metabolic_models/spec.json" target="_blank">Example</a></td>
</tr>
<tr class="field-odd field"><th class="field-name" colspan="2">textsubdata_options:</th></tr>
<tr class="field-odd field"><td>&#160;</td><td class="field-body">optional block defining details of the <code class="docutils literal notranslate"><span class="pre">textsubdata</span></code> type -  <a href="https://github.com/kbaseapps/fba_tools/blob/master/ui/narrative/methods/compare_flux_with_expression/spec.json" target="_blank">Example</a></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="options-for-the-text-parameter-type-in-spec-json">
<h3><a class="toc-backref" href="#id7">Options for the text parameter type in <code class="docutils literal notranslate"><span class="pre">spec.json</span></code></a><a class="headerlink" href="#options-for-the-text-parameter-type-in-spec-json" title="Permalink to this headline">¶</a></h3>
<p>Options in the <code class="docutils literal notranslate"><span class="pre">text_options</span></code> block allow you to specify many different types of validation and behavior. Fields named <code class="docutils literal notranslate"><span class="pre">valid_ws_types</span></code> connect a parameter with one or more types of objects stored in the Workspace. In this mode, the narrative will show the available objects as drop-down options. For instance, the following is an example of <code class="docutils literal notranslate"><span class="pre">text_options</span></code>,
allowing you to choose one of the Genome objects stored in the Workspace:</p>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="s2">&quot;text_options&quot;</span> <span class="o">:</span> <span class="p">{</span>
    <span class="s2">&quot;valid_ws_types&quot;</span> <span class="o">:</span> <span class="p">[</span> <span class="s2">&quot;KBaseGenomes.Genome&quot;</span> <span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
<p>If you would like to mark this parameter as output, meaning the UI interface shouldn’t require
the chosen object to be present in Workspace storage, then you can set the <code class="docutils literal notranslate"><span class="pre">is_output_name</span></code> sub-option to
true:</p>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="s2">&quot;text_options&quot;</span> <span class="o">:</span> <span class="p">{</span>
    <span class="s2">&quot;valid_ws_types&quot;</span> <span class="o">:</span> <span class="p">[</span> <span class="s2">&quot;KBaseGenomes.Genome&quot;</span> <span class="p">],</span>
    <span class="s2">&quot;is_output_name&quot;</span> <span class="o">:</span> <span class="kc">true</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Another sub-option is <code class="docutils literal notranslate"><span class="pre">validate_as</span></code>, allowing you to validate a value entered in the UI as an <code class="docutils literal notranslate"><span class="pre">int</span></code> or <code class="docutils literal notranslate"><span class="pre">float</span></code>. If
you want a parameter to be an integer with minimum and/or maximum limits you can use additional properties, as in this example:</p>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="s2">&quot;text_options&quot;</span> <span class="o">:</span> <span class="p">{</span>
    <span class="s2">&quot;valid_ws_types&quot;</span> <span class="o">:</span> <span class="p">[</span> <span class="p">],</span>
    <span class="s2">&quot;validate_as&quot;</span><span class="o">:</span> <span class="s2">&quot;int&quot;</span><span class="p">,</span>
    <span class="s2">&quot;min_int&quot;</span> <span class="o">:</span> <span class="mi">1</span><span class="p">,</span>
    <span class="s2">&quot;max_int&quot;</span> <span class="o">:</span> <span class="mi">200</span>
<span class="p">}</span>
</pre></div>
</div>
<p>And similarly for float types:</p>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="s2">&quot;text_options&quot;</span> <span class="o">:</span> <span class="p">{</span>
    <span class="s2">&quot;valid_ws_types&quot;</span> <span class="o">:</span> <span class="p">[</span> <span class="p">],</span>
    <span class="s2">&quot;validate_as&quot;</span><span class="o">:</span> <span class="s2">&quot;float&quot;</span><span class="p">,</span>
    <span class="s2">&quot;min_float&quot;</span> <span class="o">:</span> <span class="mi">1</span><span class="p">,</span>
    <span class="s2">&quot;max_float&quot;</span> <span class="o">:</span> <span class="mi">200</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="options-for-the-drop-down-parameter-type-in-spec-json">
<h3><a class="toc-backref" href="#id8">Options for the drop-down parameter type in <code class="docutils literal notranslate"><span class="pre">spec.json</span></code></a><a class="headerlink" href="#options-for-the-drop-down-parameter-type-in-spec-json" title="Permalink to this headline">¶</a></h3>
<p>There is only one sub-option available inside the <code class="docutils literal notranslate"><span class="pre">dropdown_options</span></code> block: the <code class="docutils literal notranslate"><span class="pre">options</span></code> property whose value should be set to a list of objects defining drop-down items. Each object should have two properties: <code class="docutils literal notranslate"><span class="pre">value</span></code> defining an internal item ID (sent to the back-end function when the given item is selected); and the <code class="docutils literal notranslate"><span class="pre">display</span></code> property, which defines text shown for this item in the UI. The following is an example of the “dropdown_options” block:</p>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="s2">&quot;dropdown_options&quot;</span><span class="o">:</span><span class="p">{</span>
    <span class="s2">&quot;options&quot;</span><span class="o">:</span> <span class="p">[{</span>
        <span class="s2">&quot;value&quot;</span><span class="o">:</span> <span class="s2">&quot;lloyd&quot;</span><span class="p">,</span>
        <span class="s2">&quot;display&quot;</span><span class="o">:</span> <span class="s2">&quot;Lloyd&quot;</span>
    <span class="p">},</span> <span class="p">{</span>
        <span class="s2">&quot;value&quot;</span><span class="o">:</span> <span class="s2">&quot;hartigan_wong&quot;</span><span class="p">,</span>
        <span class="s2">&quot;display&quot;</span><span class="o">:</span> <span class="s2">&quot;Hartigan-Wong&quot;</span>
    <span class="p">},</span> <span class="p">{</span>
        <span class="s2">&quot;value&quot;</span><span class="o">:</span> <span class="s2">&quot;forgy&quot;</span><span class="p">,</span>
        <span class="s2">&quot;display&quot;</span><span class="o">:</span> <span class="s2">&quot;Forgy&quot;</span>
    <span class="p">},</span> <span class="p">{</span>
        <span class="s2">&quot;value&quot;</span><span class="o">:</span> <span class="s2">&quot;mac_queen&quot;</span><span class="p">,</span>
        <span class="s2">&quot;display&quot;</span><span class="o">:</span> <span class="s2">&quot;MacQueen&quot;</span>
    <span class="p">}]</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="options-for-the-checkbox-parameter-type-in-spec-json">
<h3><a class="toc-backref" href="#id9">Options for the checkbox parameter type in <code class="docutils literal notranslate"><span class="pre">spec.json</span></code></a><a class="headerlink" href="#options-for-the-checkbox-parameter-type-in-spec-json" title="Permalink to this headline">¶</a></h3>
<p>The following is the list of sub-options available inside <code class="docutils literal notranslate"><span class="pre">checkbox_options</span></code> block:</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">checked_value:</th><td class="field-body">defines the value to be sent to a service function when the checkbox is selected</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">unchecked_value:</th></tr>
<tr class="field-even field"><td>&#160;</td><td class="field-body">defines the value to be sent to a service function when the checkbox is not
selected</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="options-for-the-textarea-parameter-type-in-spec-json">
<h3><a class="toc-backref" href="#id10">Options for the textarea parameter type in <code class="docutils literal notranslate"><span class="pre">spec.json</span></code></a><a class="headerlink" href="#options-for-the-textarea-parameter-type-in-spec-json" title="Permalink to this headline">¶</a></h3>
<p>There is only one sub-option available inside the <code class="docutils literal notranslate"><span class="pre">textarea_options</span></code> block:</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">n_rows:</th><td class="field-body">defines the number of lines shown for this textarea in the UI.</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="options-for-the-textsubdata-parameter-type-in-spec-json">
<h3><a class="toc-backref" href="#id11">Options for the textsubdata parameter type in <code class="docutils literal notranslate"><span class="pre">spec.json</span></code></a><a class="headerlink" href="#options-for-the-textsubdata-parameter-type-in-spec-json" title="Permalink to this headline">¶</a></h3>
<p>This parameter type allows you to select items that are parts of the workspace object (let’s call them
sub-objects). The following is the list of sub-options available inside the <code class="docutils literal notranslate"><span class="pre">textsubdata_options</span></code> block:</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">multiselection:</th><td class="field-body">flag (boolean) allowing to have more than one selected object</td>
</tr>
<tr class="field-even field"><th class="field-name">show_src_obj:</th><td class="field-body">flag (boolean) shows the name of a workspace object where we are selecting
sub-objects</td>
</tr>
<tr class="field-odd field"><th class="field-name">allow_custom:</th><td class="field-body">flag (boolean) allow the user to enter values which are not present in the source
object</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">subdata_selection:</th></tr>
<tr class="field-even field"><td>&#160;</td><td class="field-body">main block with selection options (see below)</td>
</tr>
</tbody>
</table>
<p>Options under <code class="docutils literal notranslate"><span class="pre">subdata_section</span></code>:</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name" colspan="2">path_to_subdata:</th></tr>
<tr class="field-odd field"><td>&#160;</td><td class="field-body">JSON-path leading to the level of a of sub-object (this should be an array of
property names)</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">subdata_included:</th></tr>
<tr class="field-even field"><td>&#160;</td><td class="field-body">list of string JSON-paths to be loaded (in case the JSON-path leads to a certain
field inside the sub-objects, then the level of array of sub-objects is denoted
as [*])</td>
</tr>
<tr class="field-odd field"><th class="field-name">constant_ref:</th><td class="field-body">static reference to some object in the public workspace (alternative to the
<strong>parameter_id</strong>)</td>
</tr>
<tr class="field-even field"><th class="field-name">parameter_id:</th><td class="field-body">points to the ID of another UI parameter used to select a workspace object where we
are selecting sub-objects</td>
</tr>
<tr class="field-odd field"><th class="field-name">selection_id:</th><td class="field-body">name of the field of the sub-object which will be sent as a selected value</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">selection_description:</th></tr>
<tr class="field-even field"><td>&#160;</td><td class="field-body">list of fields of the sub-object to be shown for each selectable item</td>
</tr>
<tr class="field-odd field"><th class="field-name" colspan="2">description_template:</th></tr>
<tr class="field-odd field"><td>&#160;</td><td class="field-body">optional template defining the representation of fields from
<code class="docutils literal notranslate"><span class="pre">selection_description</span></code> (placeholders for the fields are defined as
{{field-name}})</td>
</tr>
</tbody>
</table>
<p>The following is an example of the <code class="docutils literal notranslate"><span class="pre">textsubdata_options</span></code> block for the model reactions in the <code class="docutils literal notranslate"><span class="pre">KBaseFBA.FBAModel</span></code> object:</p>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="s2">&quot;textsubdata_options&quot;</span> <span class="o">:</span> <span class="p">{</span>
   <span class="s2">&quot;subdata_selection&quot;</span><span class="o">:</span> <span class="p">{</span>
      <span class="s2">&quot;parameter_id&quot;</span> <span class="o">:</span> <span class="s2">&quot;input_model&quot;</span><span class="p">,</span>
      <span class="s2">&quot;subdata_included&quot;</span> <span class="o">:</span> <span class="p">[</span><span class="s2">&quot;modelcompounds/[*]/id&quot;</span><span class="p">,</span>
      <span class="s2">&quot;modelcompounds/[*]/name&quot;</span><span class="p">,</span><span class="s2">&quot;modelcompounds/[*]/formula&quot;</span><span class="p">],</span>
      <span class="s2">&quot;path_to_subdata&quot;</span><span class="o">:</span> <span class="p">[</span><span class="s2">&quot;modelcompounds&quot;</span><span class="p">],</span>
      <span class="s2">&quot;selection_id&quot;</span> <span class="o">:</span> <span class="s2">&quot;id&quot;</span><span class="p">,</span>
      <span class="s2">&quot;selection_description&quot;</span> <span class="o">:</span> <span class="p">[</span><span class="s2">&quot;name&quot;</span><span class="p">,</span><span class="s2">&quot;formula&quot;</span><span class="p">],</span>
      <span class="s2">&quot;description_template&quot;</span> <span class="o">:</span><span class="s2">&quot;- {{name}} ({{formula}})&quot;</span>
  <span class="p">},</span>
  <span class="s2">&quot;multiselection&quot;</span><span class="o">:</span><span class="kc">true</span><span class="p">,</span>
  <span class="s2">&quot;show_src_obj&quot;</span><span class="o">:</span><span class="kc">false</span><span class="p">,</span>
  <span class="s2">&quot;allow_custom&quot;</span><span class="o">:</span><span class="kc">false</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="options-for-the-dynamic-dropdown-in-spec-json">
<h3><a class="toc-backref" href="#id12">Options for the dynamic_dropdown in <code class="docutils literal notranslate"><span class="pre">spec.json</span></code></a><a class="headerlink" href="#options-for-the-dynamic-dropdown-in-spec-json" title="Permalink to this headline">¶</a></h3>
<p>The <code class="docutils literal notranslate"><span class="pre">dynamic_dropdown</span></code> parameter type defines a field that gives the user an autocomplete dropdown, where the options in the dropdown can be dynamic (usually based on the results of a service call). For instance, you might have a selection of files where the options are from the staging_service or from kbase_search. The parameter appears as a text field with a dropdown similar to the selection of other WS data objects.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">data_source:</th><td class="field-body">One of <code class="docutils literal notranslate"><span class="pre">ftp_staging</span></code>, <code class="docutils literal notranslate"><span class="pre">search</span></code>, or <code class="docutils literal notranslate"><span class="pre">custom</span></code>. Provides sensible defaults for the
following parameters for a common type of dropdown that can be overwritten</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">service_function:</th></tr>
<tr class="field-even field"><td>&#160;</td><td class="field-body">Name of the SDK method, including an SDK module prefix, started up as a dynamic
service (this needs to be the fully qualified method name, such as
<code class="docutils literal notranslate"><span class="pre">&quot;ModuleName.method_name&quot;</span></code>).</td>
</tr>
<tr class="field-odd field"><th class="field-name" colspan="2">service_version:</th></tr>
<tr class="field-odd field"><td>&#160;</td><td class="field-body">Optional version of the module used in the service_function (the default value is
‘release’).</td>
</tr>
<tr class="field-even field"><th class="field-name">service_params:</th><td class="field-body">The parameters supplied to the dynamic service call as JSON. The special text
<code class="docutils literal notranslate"><span class="pre">&quot;{{dynamic_dropdown_input}}&quot;</span></code> will be replaced by the value from the user input
at call time.</td>
</tr>
<tr class="field-odd field"><th class="field-name" colspan="2">path_to_subdata:</th></tr>
<tr class="field-odd field"><td>&#160;</td><td class="field-body">JSON-path leading to the level of an array of sub-objects (instead of a string
type, the JSON-path here is treated as an array of elements)</td>
</tr>
<tr class="field-even field"><th class="field-name">result_aliases:</th><td class="field-body">Mapping that connects a short name to a field in the returned data object.</td>
</tr>
<tr class="field-odd field"><th class="field-name">selection_id:</th><td class="field-body">Name of a key in <code class="docutils literal notranslate"><span class="pre">result_aliases</span></code> that will be sent as the selected value</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">description_template:</th></tr>
<tr class="field-even field"><td>&#160;</td><td class="field-body">Defines how the description of items is rendered using Handlebar templates
(use the keys in result_aliases as variable names)</td>
</tr>
<tr class="field-odd field"><th class="field-name">multiselection:</th><td class="field-body">If true, then multiple selections are allowed in a single input field. This will
override the <code class="docutils literal notranslate"><span class="pre">allow_multiple</span></code> option (which allows user addition) of additional
fields. If true, then this parameter will return a list. Defaults to false</td>
</tr>
</tbody>
</table>
<p>Here is an example for taxon search:</p>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;id&quot;</span> <span class="o">:</span> <span class="s2">&quot;search&quot;</span><span class="p">,</span>
    <span class="s2">&quot;optional&quot;</span> <span class="o">:</span> <span class="kc">false</span><span class="p">,</span>
    <span class="s2">&quot;advanced&quot;</span> <span class="o">:</span> <span class="kc">false</span><span class="p">,</span>
    <span class="s2">&quot;allow_multiple&quot;</span> <span class="o">:</span> <span class="kc">false</span><span class="p">,</span>
    <span class="s2">&quot;default_values&quot;</span> <span class="o">:</span> <span class="p">[</span> <span class="s2">&quot;&quot;</span> <span class="p">],</span>
    <span class="s2">&quot;field_type&quot;</span> <span class="o">:</span> <span class="s2">&quot;dynamic_dropdown&quot;</span><span class="p">,</span>
    <span class="s2">&quot;dynamic_dropdown_options&quot;</span> <span class="o">:</span> <span class="p">{</span>
      <span class="s2">&quot;data_source&quot;</span><span class="o">:</span> <span class="s2">&quot;custom&quot;</span><span class="p">,</span>
      <span class="s2">&quot;service_function&quot;</span><span class="o">:</span> <span class="s2">&quot;KBaseSearchEngine.search_objects&quot;</span><span class="p">,</span>
      <span class="s2">&quot;service_version&quot;</span><span class="o">:</span> <span class="s2">&quot;dev&quot;</span><span class="p">,</span>
      <span class="s2">&quot;service_params&quot;</span><span class="o">:</span> <span class="p">[{</span>
          <span class="s2">&quot;object_types&quot;</span><span class="o">:</span> <span class="p">[</span><span class="s2">&quot;taxon&quot;</span><span class="p">],</span>
          <span class="s2">&quot;match_filter&quot;</span><span class="o">:</span> <span class="p">{</span>
              <span class="s2">&quot;full_text_in_all&quot;</span><span class="o">:</span> <span class="s2">&quot;{{dynamic_dropdown_input}}&quot;</span>
          <span class="p">},</span>
          <span class="s2">&quot;access_filter&quot;</span><span class="o">:</span> <span class="p">{</span>
              <span class="s2">&quot;with_private&quot;</span><span class="o">:</span> <span class="mi">0</span><span class="p">,</span>
              <span class="s2">&quot;with_public&quot;</span><span class="o">:</span> <span class="mi">1</span>
          <span class="p">},</span>
          <span class="s2">&quot;sorting_rules&quot;</span><span class="o">:</span> <span class="p">[{</span>
              <span class="s2">&quot;is_object_property&quot;</span><span class="o">:</span> <span class="mi">0</span><span class="p">,</span>
              <span class="s2">&quot;property&quot;</span><span class="o">:</span> <span class="s2">&quot;timestamp&quot;</span><span class="p">,</span>
              <span class="s2">&quot;ascending&quot;</span><span class="o">:</span> <span class="mi">0</span>
          <span class="p">}]</span>
      <span class="p">}],</span>
      <span class="s2">&quot;path_to_subdata&quot;</span><span class="o">:</span> <span class="s2">&quot;result[0].objects&quot;</span><span class="p">,</span>
      <span class="s2">&quot;result_aliases&quot;</span><span class="o">:</span> <span class="p">{</span>
        <span class="s2">&quot;taxon_name&quot;</span><span class="o">:</span> <span class="s2">&quot;object_name&quot;</span><span class="p">,</span>
        <span class="s2">&quot;scientific_name&quot;</span><span class="o">:</span> <span class="s2">&quot;key_props.scientific_name&quot;</span><span class="p">,</span>
        <span class="s2">&quot;scientific_lineage&quot;</span><span class="o">:</span> <span class="s2">&quot;key_props.scientific_lineage&quot;</span>
      <span class="p">},</span>
      <span class="s2">&quot;selection_id&quot;</span> <span class="o">:</span> <span class="s2">&quot;taxon_name&quot;</span><span class="p">,</span>
      <span class="s2">&quot;description_template&quot;</span> <span class="o">:</span> <span class="s2">&quot;&lt;strong&gt;{{scientific_name}}&lt;/strong&gt;: {{scientific_lineage}})&quot;</span><span class="p">,</span>
      <span class="s2">&quot;multiselection&quot;</span><span class="o">:</span><span class="kc">false</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="parameter-groups-in-spec-json">
<h2><a class="toc-backref" href="#id13">Parameter groups in <code class="docutils literal notranslate"><span class="pre">spec.json</span></code></a><a class="headerlink" href="#parameter-groups-in-spec-json" title="Permalink to this headline">¶</a></h2>
<p>Parameter groups combine a set of individually specified parameters into logical sets. This can be used for something as simple as visually grouping related input (i.e. distinguishing a set of parameters passed to a wrapped tool from kbase related parameters), but it’s most often used to allow users to specify multiple items described by a more than one parameter.</p>
<p>It is also possible to have an optional parameter group with required parameters. If the parameter group is present, all the required parameters must be provided. The default resulting structure is a mapping (or list of mappings if <code class="docutils literal notranslate"><span class="pre">allow_multiple</span></code> is 1) with the parameter_ids as keys (e.g. <code class="docutils literal notranslate"><span class="pre">{id:</span> <span class="pre">[{parameter_id_1:</span> <span class="pre">value_1,</span> <span class="pre">parameter_id_2:</span> <span class="pre">value_2</span> <span class="pre">...}]}</span></code>) but this can be modified with the <code class="docutils literal notranslate"><span class="pre">id_mapping</span></code> option.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">id:</th><td class="field-body">id of the parameter group. Must be unique within the method among all parameters and groups</td>
</tr>
<tr class="field-even field"><th class="field-name">parameter_ids:</th><td class="field-body">IDs of parameters included in this group</td>
</tr>
<tr class="field-odd field"><th class="field-name">ui_name:</th><td class="field-body">short name that is displayed to the user</td>
</tr>
<tr class="field-even field"><th class="field-name">short_hint:</th><td class="field-body">short phrase or sentence describing the parameter group</td>
</tr>
<tr class="field-odd field"><th class="field-name">description:</th><td class="field-body">longer and more technical description of the parameter group (long-hint)</td>
</tr>
<tr class="field-even field"><th class="field-name">allow_mutiple:</th><td class="field-body">allows entry of a list instead of a single structure, default is 0. If set, the
number of starting boxes will be either 1 or the number of elements in the
default_values list.</td>
</tr>
<tr class="field-odd field"><th class="field-name">optional:</th><td class="field-body">set to 1 to make the group optional, default is 0</td>
</tr>
<tr class="field-even field"><th class="field-name">advanced:</th><td class="field-body">set to 1 to make this an advanced option, default is 0. If an option is advanced, it
should also be optional or have a default value</td>
</tr>
<tr class="field-odd field"><th class="field-name">id_mapping:</th><td class="field-body">optional mapping which connects parameter IDs (as keys) to a desired name in the
output object (as values) (e.g. <code class="docutils literal notranslate"><span class="pre">{&quot;parameter_id&quot;:&quot;output_key&quot;}</span></code>). This provides
similar functionality to the <code class="docutils literal notranslate"><span class="pre">kb_service_input_mapping</span></code> and
<code class="docutils literal notranslate"><span class="pre">kb_service_output_mapping</span></code> described in the behavior section below for these nested
objects.</td>
</tr>
<tr class="field-even field"><th class="field-name">with_border:</th><td class="field-body">set to 1 to wrap this group with border.</td>
</tr>
</tbody>
</table>
<p>Here is an example of a <code class="docutils literal notranslate"><span class="pre">parameter-groups</span></code> block for from the <a href="https://github.com/cshenry/fba_tools/blob/4e9001c3547388eb70da6c07229f54c4aac23af2/ui/narrative/methods/edit_media/spec.json" target="_blank">Edit Media UI</a> inside the <code class="docutils literal notranslate"><span class="pre">fba_tools</span></code> app.</p>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="s2">&quot;parameter-groups&quot;</span><span class="o">:</span> <span class="p">[</span>
    <span class="p">{</span>
        <span class="s2">&quot;id&quot;</span><span class="o">:</span> <span class="s2">&quot;compounds_to_change&quot;</span><span class="p">,</span>
        <span class="s2">&quot;parameters&quot;</span><span class="o">:</span> <span class="p">[</span>
            <span class="s2">&quot;change_id&quot;</span><span class="p">,</span>
            <span class="s2">&quot;change_concentration&quot;</span><span class="p">,</span>
            <span class="s2">&quot;change_minflux&quot;</span><span class="p">,</span>
            <span class="s2">&quot;change_maxflux&quot;</span>
        <span class="p">],</span>
        <span class="s2">&quot;optional&quot;</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
        <span class="s2">&quot;advanced&quot;</span><span class="o">:</span> <span class="kc">false</span><span class="p">,</span>
        <span class="s2">&quot;allow_multiple&quot;</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
        <span class="s2">&quot;with_border&quot;</span><span class="o">:</span> <span class="kc">true</span>
    <span class="p">},</span>
    <span class="p">{</span>
        <span class="s2">&quot;id&quot;</span><span class="o">:</span> <span class="s2">&quot;compounds_to_add&quot;</span><span class="p">,</span>
        <span class="s2">&quot;parameters&quot;</span><span class="o">:</span> <span class="p">[</span>
            <span class="s2">&quot;add_id&quot;</span><span class="p">,</span>
            <span class="s2">&quot;add_concentration&quot;</span><span class="p">,</span>
            <span class="s2">&quot;add_minflux&quot;</span><span class="p">,</span>
            <span class="s2">&quot;add_maxflux&quot;</span>
        <span class="p">],</span>
        <span class="s2">&quot;optional&quot;</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
        <span class="s2">&quot;allow_multiple&quot;</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
        <span class="s2">&quot;advanced&quot;</span><span class="o">:</span> <span class="kc">false</span><span class="p">,</span>
        <span class="s2">&quot;with_border&quot;</span><span class="o">:</span> <span class="kc">true</span>
    <span class="p">}</span>
<span class="p">]</span>
</pre></div>
</div>
</div>
<div class="section" id="behavior-in-spec-json">
<h2><a class="toc-backref" href="#id14">Behavior in <code class="docutils literal notranslate"><span class="pre">spec.json</span></code></a><a class="headerlink" href="#behavior-in-spec-json" title="Permalink to this headline">¶</a></h2>
<p>There are three alternative sub-blocks available inside the <code class="docutils literal notranslate"><span class="pre">behavior</span></code> block:</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name" colspan="2">service-mapping:</th></tr>
<tr class="field-odd field"><td>&#160;</td><td class="field-body">defines mapping rules for the input and output data for a typical SDK method
(described below)</td>
</tr>
<tr class="field-even field"><th class="field-name">none:</th><td class="field-body">used in case the UI method is not supposed to run any service function (for instance, when
input parameters should be passed into the widget directly) - <a href="https://github.com/kbaseapps/kb_cummerbund/blob/master/ui/narrative/methods/view_volcano_plot/spec.json" target="_blank">Example</a></td>
</tr>
<tr class="field-odd field"><th class="field-name">script-mapping:</th><td class="field-body">support for legacy software – not recommended for use in SDK repos</td>
</tr>
</tbody>
</table>
<p>In most cases, the <code class="docutils literal notranslate"><span class="pre">service-mapping</span></code> sub-block should be used. Here is the list of sub-elements available inside <code class="docutils literal notranslate"><span class="pre">service-mapping</span></code>:</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">url:</th><td class="field-body">defines the URL end-point of a deployed service (for SDK repos, this parameter should be
empty)</td>
</tr>
<tr class="field-even field"><th class="field-name">name:</th><td class="field-body">module name of an SDK repo registered in the catalog (refer to the module name in the KIDL
specification)</td>
</tr>
<tr class="field-odd field"><th class="field-name">method:</th><td class="field-body">name of the service function to be called (see the funcdef in the KIDL specification)</td>
</tr>
<tr class="field-even field"><th class="field-name">input_mapping:</th><td class="field-body">defines rules for mapping UI parameters onto service function input arguments</td>
</tr>
<tr class="field-odd field"><th class="field-name">output_mapping:</th><td class="field-body">defines rules for mapping output results returned from service functions to input
options of widgets that display these results</td>
</tr>
</tbody>
</table>
<p>Both the <code class="docutils literal notranslate"><span class="pre">input_mapping</span></code> and <code class="docutils literal notranslate"><span class="pre">output_mapping</span></code> sub-blocks are arrays of items, where each item has the following properties:</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name" colspan="2">input_parameter:</th></tr>
<tr class="field-odd field"><td>&#160;</td><td class="field-body">ID of a UI input parameter or parameter group to be used as a source of mapping</td>
</tr>
<tr class="field-even field"><th class="field-name">constant_value:</th><td class="field-body">constant value to be used as a source of mapping - <a href="https://github.com/kbaseapps/taxonomy_service/blob/master/ui/narrative/methods/create_taxonomy/spec.json" target="_blank">Example</a></td>
</tr>
<tr class="field-odd field"><th class="field-name" colspan="2">narrative_system_variable:</th></tr>
<tr class="field-odd field"><td>&#160;</td><td class="field-body">system variable in the narrative back-end to be used as a source of
mapping (only the <code class="docutils literal notranslate"><span class="pre">workspace</span></code> variable is currently supported)</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">target_property:</th></tr>
<tr class="field-even field"><td>&#160;</td><td class="field-body">name of the structure field to be set as a target of mapping</td>
</tr>
<tr class="field-odd field"><th class="field-name" colspan="2">target_argument_position:</th></tr>
<tr class="field-odd field"><td>&#160;</td><td class="field-body">(allowed for input mapping items only, default value is 0) position of
the input argument of a service function to be set as a target of
mapping</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">target_type_transform:</th></tr>
<tr class="field-even field"><td>&#160;</td><td class="field-body">optional rule allowing you to modify the passed value. See below for the
list of allowed transformations.</td>
</tr>
<tr class="field-odd field"><th class="field-name" colspan="2">service_method_output_path:</th></tr>
<tr class="field-odd field"><td>&#160;</td><td class="field-body">(allowed for output mapping items only) - defines the JSON-path into
the output prepared for the widget as a place for a target value; if
this path is an empty array, it corresponds to the root point, and all
the data returned from the service function will be captured - <a href="https://github.com/kbaseapps/FeatureSetUtils/blob/master/ui/narrative/methods/upload_featureset_from_diff_expr/spec.json" target="_blank">Example</a></td>
</tr>
</tbody>
</table>
<p>The following is a list of allowed transformations that can be used for the
<code class="docutils literal notranslate"><span class="pre">target_type_transform</span></code>:</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">none:</th><td class="field-body">(default value in case it is not defined) - no modification</td>
</tr>
<tr class="field-even field"><th class="field-name">ref:</th><td class="field-body">changes the object name into a workspace reference by adding a prefix of the workspace name followed by <code class="docutils literal notranslate"><span class="pre">/</span></code></td>
</tr>
<tr class="field-odd field"><th class="field-name">int:</th><td class="field-body">treats a text value as an integer</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">list&lt;inner-transformation&gt;:</th></tr>
<tr class="field-even field"><td>&#160;</td><td class="field-body">tries to prepare a list of items (or just iterate over items if it’s a
list already), applying inner-transformation to each element</td>
</tr>
</tbody>
</table>
<p>In a group of source properties (<code class="docutils literal notranslate"><span class="pre">input_parameter</span></code>, <code class="docutils literal notranslate"><span class="pre">constant_value</span></code>, <code class="docutils literal notranslate"><span class="pre">narrative_system_variable</span></code>), only one property can be used. For target properties, both <code class="docutils literal notranslate"><span class="pre">target_property</span></code> and <code class="docutils literal notranslate"><span class="pre">target_argument_position</span></code> can be used at the same time. This means that the service function will receive an argument with the position from <code class="docutils literal notranslate"><span class="pre">target_argument_position</span></code> and an object with property having a name from the <code class="docutils literal notranslate"><span class="pre">target_property</span></code> with target value.</p>
<div class="section" id="example-of-mappings-in-spec-json">
<h3><a class="toc-backref" href="#id15">Example of mappings in <code class="docutils literal notranslate"><span class="pre">spec.json</span></code></a><a class="headerlink" href="#example-of-mappings-in-spec-json" title="Permalink to this headline">¶</a></h3>
<p>Let’s consider some example mappings defined in the <code class="docutils literal notranslate"><span class="pre">service-mapping</span></code> sub-block of the <code class="docutils literal notranslate"><span class="pre">behavior</span></code> section. Suppose we have a function named <code class="docutils literal notranslate"><span class="pre">func1</span></code> in the module called <code class="docutils literal notranslate"><span class="pre">module1</span></code>, where we expect to get two arguments: a string and an object with the internal field <code class="docutils literal notranslate"><span class="pre">input_prop</span></code> (such as <code class="docutils literal notranslate"><span class="pre">{&quot;input_prop&quot;:</span> <span class="pre">&quot;...&quot;}</span></code>). We also have two UI parameters of the type <code class="docutils literal notranslate"><span class="pre">text</span></code> with the IDs <code class="docutils literal notranslate"><span class="pre">param1</span></code> and <code class="docutils literal notranslate"><span class="pre">param2</span></code>. Output returned from the function is an array containing only one object which has an internal field called <code class="docutils literal notranslate"><span class="pre">output_prop</span></code>. The value of this field should be mapped to the <code class="docutils literal notranslate"><span class="pre">option1</span></code> option in the UI widget. In this case, we’ll have following mappings:</p>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="s2">&quot;behavior&quot;</span> <span class="o">:</span> <span class="p">{</span>
    <span class="s2">&quot;service-mapping&quot;</span> <span class="o">:</span> <span class="p">{</span>
    <span class="s2">&quot;url&quot;</span> <span class="o">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
    <span class="s2">&quot;name&quot;</span> <span class="o">:</span> <span class="s2">&quot;module1&quot;</span><span class="p">,</span>
    <span class="s2">&quot;method&quot;</span> <span class="o">:</span> <span class="s2">&quot;func1&quot;</span><span class="p">,</span>
    <span class="s2">&quot;input_mapping&quot;</span> <span class="o">:</span> <span class="p">[</span>
        <span class="p">{</span>
            <span class="s2">&quot;input_parameter&quot;</span><span class="o">:</span> <span class="s2">&quot;param1&quot;</span>
            <span class="s2">&quot;target_argument_position&quot;</span><span class="o">:</span> <span class="mi">0</span>
        <span class="p">},</span> <span class="p">{</span>
            <span class="s2">&quot;input_parameter&quot;</span><span class="o">:</span> <span class="s2">&quot;param2&quot;</span><span class="p">,</span>
            <span class="s2">&quot;target_argument_position&quot;</span><span class="o">:</span> <span class="mi">1</span><span class="p">,</span>
            <span class="s2">&quot;target_property&quot;</span><span class="o">:</span> <span class="s2">&quot;input_prop&quot;</span>
        <span class="p">}</span>
    <span class="p">],</span>
    <span class="s2">&quot;output_mapping&quot;</span> <span class="o">:</span> <span class="p">[</span>
        <span class="p">{</span>
            <span class="s2">&quot;service_method_output_path&quot;</span><span class="o">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="s2">&quot;output_prop&quot;</span><span class="p">],</span>
            <span class="s2">&quot;target_property&quot;</span><span class="o">:</span> <span class="s2">&quot;option1&quot;</span>
        <span class="p">}</span>
    <span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="display-text-file-display-yaml">
<h2><a class="toc-backref" href="#id16">Display Text file (<code class="docutils literal notranslate"><span class="pre">display.yaml</span></code>)</a><a class="headerlink" href="#display-text-file-display-yaml" title="Permalink to this headline">¶</a></h2>
<p>The <code class="docutils literal notranslate"><span class="pre">display.yaml</span></code> file controls how information is displayed in the narrative and in the app catalog.</p>
<div class="align-center figure" id="id1">
<img alt="../_images/View_flux_network_narr.png" src="../_images/View_flux_network_narr.png" />
<p class="caption"><span class="caption-text">View Flux Network App in a narrative.</span></p>
</div>
<div class="align-center figure" id="id2">
<a class="reference internal image-reference" href="../_images/ViewFluxNetwork_cat.png"><img alt="../_images/ViewFluxNetwork_cat.png" src="../_images/ViewFluxNetwork_cat.png" style="width: 90%;" /></a>
<p class="caption"><span class="caption-text">App Catalog for View Flux Network.</span></p>
</div>
<p>This file uses the YAML format with the following top-level fields:</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">name:</th><td class="field-body">name of the method listed in the UI</td>
</tr>
<tr class="field-even field"><th class="field-name">tooltip:</th><td class="field-body">more detailed explanation of the method shown on a mouse-over event</td>
</tr>
<tr class="field-odd field"><th class="field-name">screenshots:</th><td class="field-body">list of names of screenshot files from the <code class="docutils literal notranslate"><span class="pre">img</span></code> sub-folder</td>
</tr>
<tr class="field-even field"><th class="field-name">icon:</th><td class="field-body">(optional) name of an icon file from the <code class="docutils literal notranslate"><span class="pre">img</span></code> sub-folder.  <a href="https://github.com/kbaseapps/fba_tools/blob/master/ui/narrative/methods/build_metabolic_model/display.yaml" target="_blank">Example</a></td>
</tr>
<tr class="field-odd field"><th class="field-name" colspan="2">method-suggestions:</th></tr>
<tr class="field-odd field"><td>&#160;</td><td class="field-body">list of objects defining a set of other methods that are suggested to the user
as related methods. There are two sub-elements – <code class="docutils literal notranslate"><span class="pre">related</span></code> and <code class="docutils literal notranslate"><span class="pre">next</span></code> –
pointing to arrays of method IDs</td>
</tr>
<tr class="field-even field"><th class="field-name">parameters:</th><td class="field-body">parameter IDs (defined in <code class="docutils literal notranslate"><span class="pre">spec.json</span></code>) mapped to objects to objects that define
textual information for these parameters (see details below)</td>
</tr>
<tr class="field-odd field"><th class="field-name">description:</th><td class="field-body">very detailed explanation of what this method does, appearing on a separate page</td>
</tr>
<tr class="field-even field"><th class="field-name">publications:</th><td class="field-body">(optional) list of objects describing related publications. Each object includes two
fields: <code class="docutils literal notranslate"><span class="pre">display-text</span></code>, containing a reference to a scientific journal; and
<code class="docutils literal notranslate"><span class="pre">link</span></code>, which has the URL to an online resource.  <a href="https://github.com/kbaseapps/fba_tools/blob/master/ui/narrative/methods/build_metabolic_model/display.yaml" target="_blank">Example</a></td>
</tr>
</tbody>
</table>
<p>Each field in the <code class="docutils literal notranslate"><span class="pre">parameters</span></code> section can have the following properties:</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">ui-name:</th><td class="field-body">name of the parameter used to show the field in the UI</td>
</tr>
<tr class="field-even field"><th class="field-name">short-hint:</th><td class="field-body">short description shown in front of each parameter on the right side of the method
input panel in the narrative</td>
</tr>
<tr class="field-odd field"><th class="field-name">long:</th><td class="field-body">a more detailed explanation available by mouse-over</td>
</tr>
<tr class="field-even field"><th class="field-name">placeholder:</th><td class="field-body">(optional) if the parameter type is textual (one of <code class="docutils literal notranslate"><span class="pre">text</span></code>, <code class="docutils literal notranslate"><span class="pre">textarea</span></code>, <code class="docutils literal notranslate"><span class="pre">textsubdata</span></code>), then this defines the placeholder text for the field.  <a href="https://github.com/kbaseapps/fba_tools/blob/master/ui/narrative/methods/build_metabolic_model/display.yaml" target="_blank">Example</a></td>
</tr>
</tbody>
</table>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="terminology.html" class="btn btn-neutral float-right" title="Terminology" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="KIDL_spec.html" class="btn btn-neutral" title="KIDL Specification" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2018, KBase

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../_static/jquery.js"></script>
        <script type="text/javascript" src="../_static/underscore.js"></script>
        <script type="text/javascript" src="../_static/doctools.js"></script>
    

  

  <script type="text/javascript" src="../_static/js/theme.js"></script>

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>