

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Narrative App UI Specification &mdash; KBase SDK 0.1.18 documentation</title>
  

  
  
  
  

  

  
  
    

  

  
    <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/css/custom.css" type="text/css" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="prev" title="KIDL Specification" href="KIDL_spec.html" /> 

  
  <script src="../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../index.html" class="icon icon-home"> KBase SDK
          

          
            
            <img src="../_static/logo.png" class="logo" alt="Logo"/>
          
          </a>

          
            
            
              <div class="version">
                0.1
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Intro</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../overview.html">Concepts and Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../video_tutorial.html">Video Tutorial</a></li>
</ul>
<p class="caption"><span class="caption-text">Tutorial</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../tutorial/dependencies.html">1. Dependencies &amp; Prerequisites</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tutorial/install.html">2. Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tutorial/initialize.html">3. Initialize the App</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tutorial/setup.html">4. Setup &amp; Configuration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tutorial/implement.html">5. Implement Code</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tutorial/publish.html">6. Publish and Update</a></li>
</ul>
<p class="caption"><span class="caption-text">Developer Guides</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="questions_and_answers.html">Common Questions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../howtos/create_a_report.html">Creating reports</a></li>
<li class="toctree-l1"><a class="reference internal" href="../howtos/add_ui_elements.html">Adding UI Elements</a></li>
<li class="toctree-l1"><a class="reference internal" href="../howtos/edit_your_dockerfile.html">Editing your app’s Dockerfile</a></li>
<li class="toctree-l1"><a class="reference internal" href="../howtos/fill_out_app_information.html">Fully documenting your app</a></li>
<li class="toctree-l1"><a class="reference internal" href="../howtos/run_a_shell_command.html">Running shell commands</a></li>
<li class="toctree-l1"><a class="reference internal" href="../howtos/file_utils.html">Working with the file utils</a></li>
</ul>
<p class="caption"><span class="caption-text">Advanced Guides</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../howtos/workspace.html">Using Workspace Metadata</a></li>
<li class="toctree-l1"><a class="reference internal" href="../howtos/manual_build.html">Manually building the SDK</a></li>
<li class="toctree-l1"><a class="reference internal" href="../howtos/work_with_reference_data.html">Working with reference data</a></li>
<li class="toctree-l1"><a class="reference internal" href="../howtos/job_manager.html">Listing and viewing jobs</a></li>
<li class="toctree-l1"><a class="reference internal" href="../howtos/dynamic_services.html">Dynamic Services</a></li>
</ul>
<p class="caption"><span class="caption-text">References &amp; Resources</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="module_anatomy.html">Anatomy of an App</a></li>
<li class="toctree-l1"><a class="reference internal" href="troubleshooting.html">Troubleshooting Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="dev_guidelines.html">Developer Guidelines</a></li>
<li class="toctree-l1"><a class="reference internal" href="KIDL_spec.html">KIDL Specification</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Narrative App UI Specification</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">KBase SDK</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
      <li>Narrative App UI Specification</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            
              <a href="https://github.com/kbase/kb_sdk_docs//blob/master/source/references/UI_spec.rst" class="fa fa-github"> Edit on GitHub</a>
            
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="narrative-app-ui-specification">
<h1><a class="toc-backref" href="#id1">Narrative App UI Specification</a><a class="headerlink" href="#narrative-app-ui-specification" title="Permalink to this headline">¶</a></h1>
<div class="contents topic" id="contents">
<p class="topic-title first">Contents</p>
<ul class="simple">
<li><a class="reference internal" href="#narrative-app-ui-specification" id="id1">Narrative App UI Specification</a><ul>
<li><a class="reference internal" href="#structure-of-folders-and-files" id="id2">Structure of Folders and Files</a></li>
<li><a class="reference internal" href="#structural-file-spec-json" id="id3">Structural file: <code class="docutils literal notranslate"><span class="pre">spec.json</span></code></a><ul>
<li><a class="reference internal" href="#parameters-in-spec-json" id="id4">Parameters in <code class="docutils literal notranslate"><span class="pre">spec.json</span></code></a></li>
<li><a class="reference internal" href="#options-for-text-parameter-type-in-spec-json" id="id5">Options for text parameter type in <code class="docutils literal notranslate"><span class="pre">spec.json</span></code></a></li>
<li><a class="reference internal" href="#options-for-drop-down-parameter-type-in-spec-json" id="id6">Options for drop-down parameter type in <code class="docutils literal notranslate"><span class="pre">spec.json</span></code></a></li>
<li><a class="reference internal" href="#options-for-checkbox-parameter-type-in-spec-json" id="id7">Options for checkbox parameter type in <code class="docutils literal notranslate"><span class="pre">spec.json</span></code></a></li>
<li><a class="reference internal" href="#options-for-textarea-parameter-type-in-spec-json" id="id8">Options for textarea parameter type in <code class="docutils literal notranslate"><span class="pre">spec.json</span></code></a></li>
<li><a class="reference internal" href="#options-for-textsubdata-parameter-type-in-spec-json" id="id9">Options for textsubdata parameter type in <code class="docutils literal notranslate"><span class="pre">spec.json</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#behavior-in-spec-json" id="id10">Behavior in <code class="docutils literal notranslate"><span class="pre">spec.json</span></code></a><ul>
<li><a class="reference internal" href="#example-for-mappings-in-spec-json" id="id11">Example for mappings in <code class="docutils literal notranslate"><span class="pre">spec.json</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#display-text-file-display-yaml" id="id12">Display Text file (<code class="docutils literal notranslate"><span class="pre">display.yaml</span></code>)</a></li>
</ul>
</li>
</ul>
</div>
<p>This document describes how the UI components of Narrative Apps are specified via fields in
spec.json ​ and ​display.yaml​ files. These spec files include input and output parameters
for the app.</p>
<div class="section" id="structure-of-folders-and-files">
<h2><a class="toc-backref" href="#id2">Structure of Folders and Files</a><a class="headerlink" href="#structure-of-folders-and-files" title="Permalink to this headline">¶</a></h2>
<p>To introduce UI specifications of Apps in an SDK repo you have to keep files and folders in a
particular structure. Currently all UI method specifications (method-specs) live in
<code class="docutils literal notranslate"><span class="pre">ui/narrative/methods/</span></code> path. Each method has its own subfolder with the name meaning the app
or method ID. Inside this folder a typical method has a <code class="docutils literal notranslate"><span class="pre">spec.json</span></code> file defining structural
input/output and parameter type components, a <code class="docutils literal notranslate"><span class="pre">display.yaml</span></code> file defining display text and
<code class="docutils literal notranslate"><span class="pre">img</span></code> subfolder containing icon and screenshot files.</p>
</div>
<div class="section" id="structural-file-spec-json">
<h2><a class="toc-backref" href="#id3">Structural file: <code class="docutils literal notranslate"><span class="pre">spec.json</span></code></a><a class="headerlink" href="#structural-file-spec-json" title="Permalink to this headline">¶</a></h2>
<p>This is a file in JSON format containing these top-level properties:</p>
<ul class="simple">
<li><strong>ver</strong> - version of each UI method-spec</li>
<li><strong>authors</strong> - list of GlobusOnline accounts of contributers</li>
<li><strong>contact</strong> - e-mail of contact person</li>
<li><strong>categories</strong> - list of tags (from fixed set of supported tags) categorizing this method into
one or more groups shown in navigation interface as set of filters; in case particular
method should be made invisible then <code class="docutils literal notranslate"><span class="pre">inactive</span></code> category should be added to this list (in
place of <code class="docutils literal notranslate"><span class="pre">active</span></code> category if it’s present)</li>
<li><strong>widgets</strong> - structure defining <strong>input</strong> and <strong>output</strong> widgets (typically <strong>input</strong> widget is set
to null meaning that standard one is used); <code class="docutils literal notranslate"><span class="pre">output</span></code> widget points to name of JavaScript
widget supported by Narrative</li>
<li><strong>parameters</strong> - list structures defining each parameter type and other features except
name (which is defined in <code class="docutils literal notranslate"><span class="pre">display.yaml</span></code> file)</li>
<li><strong>behavior</strong> - block of settings for mapping UI parameters to service function input
parameters and separately for mapping from output results returned from service
function to what should be passed to visualizing widget to show these results</li>
<li><strong>job_id_output_field</strong> - field for support of legacy code; for SDK method it should always
be set into <code class="docutils literal notranslate"><span class="pre">docker</span></code> value</li>
</ul>
<div class="section" id="parameters-in-spec-json">
<h3><a class="toc-backref" href="#id4">Parameters in <code class="docutils literal notranslate"><span class="pre">spec.json</span></code></a><a class="headerlink" href="#parameters-in-spec-json" title="Permalink to this headline">¶</a></h3>
<p>Each structure in array defined in <code class="docutils literal notranslate"><span class="pre">parameters</span></code> field defines one parameter shown in UI input
panel of this method. Here is the list of main properties of parameter structure:</p>
<ul class="simple">
<li><strong>id</strong> - ID of parameter for referring to it from <code class="docutils literal notranslate"><span class="pre">display.yaml</span></code> file and from mapping settings
of <code class="docutils literal notranslate"><span class="pre">behavior</span></code> block</li>
<li><strong>optional</strong> - flag defining whether UI interface allows empty value for this parameter or it
requires it to be set to something non-empty</li>
<li><strong>advanced</strong> - flag defining whether UI interface moves this parameter into <code class="docutils literal notranslate"><span class="pre">Advanced</span>
<span class="pre">parameters</span></code> group collapsed by default or this parameter is listed in normal order</li>
<li><strong>allow_multiple</strong> - flag defining whether UI interface allows to define more than one value
for this parameter and then treat these values as an array of values rather than one
textual/numeric/boolean value</li>
<li><strong>default_values</strong> - if set to any non-empty string this value will appear as pre-defined one</li>
<li><strong>field_type</strong> - type of parameter, could be one of <code class="docutils literal notranslate"><span class="pre">text</span></code>, <code class="docutils literal notranslate"><span class="pre">dropdown</span></code>, <code class="docutils literal notranslate"><span class="pre">checkbox</span></code>,
<code class="docutils literal notranslate"><span class="pre">textarea</span></code>, <code class="docutils literal notranslate"><span class="pre">textsubdata</span></code></li>
<li><strong>text_options</strong> - optional block defining details of <code class="docutils literal notranslate"><span class="pre">text</span></code> type</li>
<li><strong>dropdown_options</strong> - optional block defining details of <code class="docutils literal notranslate"><span class="pre">dropdown</span></code> type</li>
<li><strong>checkbox_options</strong> - optional block defining details of <code class="docutils literal notranslate"><span class="pre">checkbox</span></code> type</li>
<li><strong>textarea_options</strong> - optional block defining details of <code class="docutils literal notranslate"><span class="pre">textarea</span></code> type</li>
<li><strong>textsubdata_options</strong> - optional block defining details of <code class="docutils literal notranslate"><span class="pre">textsubdata</span></code> type</li>
</ul>
</div>
<div class="section" id="options-for-text-parameter-type-in-spec-json">
<h3><a class="toc-backref" href="#id5">Options for text parameter type in <code class="docutils literal notranslate"><span class="pre">spec.json</span></code></a><a class="headerlink" href="#options-for-text-parameter-type-in-spec-json" title="Permalink to this headline">¶</a></h3>
<p>Options in <code class="docutils literal notranslate"><span class="pre">text_options</span></code> block allow to specify many different ways of validation and behaviour.
Field named <code class="docutils literal notranslate"><span class="pre">valid_ws_types</span></code> connects a parameter with one or more types of objects stored in
Workspace KBase storage. In this mode Narrative interface will show available objects of listed
types as drop-down for this parameter. For instance here is an example of <code class="docutils literal notranslate"><span class="pre">text_options</span></code>
allowing to choose one of Genome objects stored in workspace:</p>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="s2">&quot;text_options&quot;</span> <span class="o">:</span> <span class="p">{</span>
    <span class="s2">&quot;valid_ws_types&quot;</span> <span class="o">:</span> <span class="p">[</span> <span class="s2">&quot;KBaseGenomes.Genome&quot;</span> <span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
<p>If you would like to mark this parameter as output which means UI interface shouldn’t require
chosen object to be present in Workspace storage you can set “is_output_name” sub-option to
true like:</p>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="s2">&quot;text_options&quot;</span> <span class="o">:</span> <span class="p">{</span>
    <span class="s2">&quot;valid_ws_types&quot;</span> <span class="o">:</span> <span class="p">[</span> <span class="s2">&quot;KBaseGenomes.Genome&quot;</span> <span class="p">],</span>
    <span class="s2">&quot;is_output_name&quot;</span> <span class="o">:</span> <span class="kc">true</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Another sub-option is “validate_as” allowing to validate value entered in UI as “int” or “float”. If
you what some parameter to be an integer with minimum and/or maximum limits you can use
properties like in this example:</p>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="s2">&quot;text_options&quot;</span> <span class="o">:</span> <span class="p">{</span>
    <span class="s2">&quot;valid_ws_types&quot;</span> <span class="o">:</span> <span class="p">[</span> <span class="p">],</span>
    <span class="s2">&quot;validate_as&quot;</span><span class="o">:</span> <span class="s2">&quot;int&quot;</span><span class="p">,</span>
    <span class="s2">&quot;min_int&quot;</span> <span class="o">:</span> <span class="mi">1</span><span class="p">,</span>
    <span class="s2">&quot;max_int&quot;</span> <span class="o">:</span> <span class="mi">200</span>
<span class="p">}</span>
</pre></div>
</div>
<p>And similarly for float type:</p>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="s2">&quot;text_options&quot;</span> <span class="o">:</span> <span class="p">{</span>
    <span class="s2">&quot;valid_ws_types&quot;</span> <span class="o">:</span> <span class="p">[</span> <span class="p">],</span>
    <span class="s2">&quot;validate_as&quot;</span><span class="o">:</span> <span class="s2">&quot;float&quot;</span><span class="p">,</span>
    <span class="s2">&quot;min_float&quot;</span> <span class="o">:</span> <span class="mi">1</span><span class="p">,</span>
    <span class="s2">&quot;max_float&quot;</span> <span class="o">:</span> <span class="mi">200</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="options-for-drop-down-parameter-type-in-spec-json">
<h3><a class="toc-backref" href="#id6">Options for drop-down parameter type in <code class="docutils literal notranslate"><span class="pre">spec.json</span></code></a><a class="headerlink" href="#options-for-drop-down-parameter-type-in-spec-json" title="Permalink to this headline">¶</a></h3>
<p>There is only one sub-option available inside “dropdown_options” block currently. It has
<code class="docutils literal notranslate"><span class="pre">options</span></code> name and value is list of objects defining drop-down items. Each item object should
have two properties: <code class="docutils literal notranslate"><span class="pre">value</span></code> defining internal item ID (it’s sent to back-end function when given
item is selected) and <code class="docutils literal notranslate"><span class="pre">display</span></code> defining text shown for this item in UI. Here is an example of the
whole “dropdown_options” block:</p>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="s2">&quot;dropdown_options&quot;</span><span class="o">:</span><span class="p">{</span>
    <span class="s2">&quot;options&quot;</span><span class="o">:</span> <span class="p">[{</span>
        <span class="s2">&quot;value&quot;</span><span class="o">:</span> <span class="s2">&quot;lloyd&quot;</span><span class="p">,</span>
        <span class="s2">&quot;display&quot;</span><span class="o">:</span> <span class="s2">&quot;Lloyd&quot;</span>
    <span class="p">},</span> <span class="p">{</span>
        <span class="s2">&quot;value&quot;</span><span class="o">:</span> <span class="s2">&quot;hartigan_wong&quot;</span><span class="p">,</span>
        <span class="s2">&quot;display&quot;</span><span class="o">:</span> <span class="s2">&quot;Hartigan-Wong&quot;</span>
    <span class="p">},</span> <span class="p">{</span>
        <span class="s2">&quot;value&quot;</span><span class="o">:</span> <span class="s2">&quot;forgy&quot;</span><span class="p">,</span>
        <span class="s2">&quot;display&quot;</span><span class="o">:</span> <span class="s2">&quot;Forgy&quot;</span>
    <span class="p">},</span> <span class="p">{</span>
        <span class="s2">&quot;value&quot;</span><span class="o">:</span> <span class="s2">&quot;mac_queen&quot;</span><span class="p">,</span>
        <span class="s2">&quot;display&quot;</span><span class="o">:</span> <span class="s2">&quot;MacQueen&quot;</span>
    <span class="p">}]</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="options-for-checkbox-parameter-type-in-spec-json">
<h3><a class="toc-backref" href="#id7">Options for checkbox parameter type in <code class="docutils literal notranslate"><span class="pre">spec.json</span></code></a><a class="headerlink" href="#options-for-checkbox-parameter-type-in-spec-json" title="Permalink to this headline">¶</a></h3>
<p>Here is the list of sub-options available inside <code class="docutils literal notranslate"><span class="pre">checkbox_options</span></code> block:</p>
<ul class="simple">
<li><strong>checked_value</strong> - defines value to be sent to service function when checkbox is selected</li>
<li><strong>unchecked_value</strong> - defines value to be sent to service function when checkbox is not selected</li>
</ul>
</div>
<div class="section" id="options-for-textarea-parameter-type-in-spec-json">
<h3><a class="toc-backref" href="#id8">Options for textarea parameter type in <code class="docutils literal notranslate"><span class="pre">spec.json</span></code></a><a class="headerlink" href="#options-for-textarea-parameter-type-in-spec-json" title="Permalink to this headline">¶</a></h3>
<p>There is only one sub-option available inside <code class="docutils literal notranslate"><span class="pre">textarea_options</span></code> block:</p>
<ul class="simple">
<li><strong>n_rows</strong> - defines number of lines shown for this textarea in UI.</li>
</ul>
</div>
<div class="section" id="options-for-textsubdata-parameter-type-in-spec-json">
<h3><a class="toc-backref" href="#id9">Options for textsubdata parameter type in <code class="docutils literal notranslate"><span class="pre">spec.json</span></code></a><a class="headerlink" href="#options-for-textsubdata-parameter-type-in-spec-json" title="Permalink to this headline">¶</a></h3>
<p>This parameter type allows to select items that are parts of workspace object (let’s call them
sub-objects). Here is the list of sub-options available inside <code class="docutils literal notranslate"><span class="pre">textsubdata_options</span></code> block:</p>
<ul class="simple">
<li><strong>multiselection</strong> - flag (boolean) allowing to have more than one selected object</li>
<li><strong>show_src_obj</strong> - flag (boolean) shows name of workspace object where we are
selecting sub-objects as well</li>
<li><strong>allow_custom</strong> - flag (boolean)</li>
<li><strong>subdata_selection</strong> - main block with following sub-options:</li>
<li><strong>path_to_subdata</strong> - JSON-path leading to the level of an array of sub-objects
(instead of string type JSON-path here is treated as an array of elements)</li>
<li><strong>subdata_included</strong> - list of string JSON-paths to be loaded (in case JSON-path
leads to certain field inside sub-objects then level of array of sub-objects is
denoted as [*])</li>
<li><strong>constant_ref</strong> - static reference to some object in public workspace (alternative
to <strong>parameter_id</strong>)</li>
<li><strong>parameter_id</strong> - points to ID of another UI parameter used for selection of
workspace object where we are selecting sub-objects</li>
<li><strong>selection_id</strong> - name of field of sub-object which will be sent as selected value</li>
<li><strong>selection_description</strong> - list of fields of sub-object to be shown for each
selectable item</li>
<li><strong>description_template</strong> - optional template defining the way of representation of
fields from <code class="docutils literal notranslate"><span class="pre">selection_description</span></code> (placeholders of fields are defined as
{{field-name}})</li>
</ul>
<p>Here is an example of <code class="docutils literal notranslate"><span class="pre">textsubdata_options</span></code> block for model reactions in KBaseFBA.FBAModel
object:</p>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="s2">&quot;textsubdata_options&quot;</span> <span class="o">:</span> <span class="p">{</span>
    <span class="s2">&quot;subdata_selection&quot;</span><span class="o">:</span> <span class="p">{</span>
    <span class="s2">&quot;parameter_id&quot;</span> <span class="o">:</span> <span class="s2">&quot;input_model&quot;</span><span class="p">,</span>
    <span class="s2">&quot;subdata_included&quot;</span> <span class="o">:</span> <span class="p">[</span><span class="s2">&quot;modelcompounds/[*]/id&quot;</span><span class="p">,</span>
    <span class="s2">&quot;modelcompounds/[*]/name&quot;</span><span class="p">,</span><span class="s2">&quot;modelcompounds/[*]/formula&quot;</span><span class="p">],</span>
    <span class="s2">&quot;path_to_subdata&quot;</span><span class="o">:</span> <span class="p">[</span><span class="s2">&quot;modelcompounds&quot;</span><span class="p">],</span>
    <span class="s2">&quot;selection_id&quot;</span> <span class="o">:</span> <span class="s2">&quot;id&quot;</span><span class="p">,</span>
    <span class="s2">&quot;selection_description&quot;</span> <span class="o">:</span> <span class="p">[</span><span class="s2">&quot;name&quot;</span><span class="p">,</span><span class="s2">&quot;formula&quot;</span><span class="p">],</span>
    <span class="s2">&quot;description_template&quot;</span> <span class="o">:</span><span class="s2">&quot;- {{name}} ({{formula}})&quot;</span>
<span class="p">},</span>
<span class="s2">&quot;multiselection&quot;</span><span class="o">:</span><span class="kc">true</span><span class="p">,</span>
<span class="s2">&quot;show_src_obj&quot;</span><span class="o">:</span><span class="kc">false</span><span class="p">,</span>
<span class="s2">&quot;allow_custom&quot;</span><span class="o">:</span><span class="kc">false</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="behavior-in-spec-json">
<h2><a class="toc-backref" href="#id10">Behavior in <code class="docutils literal notranslate"><span class="pre">spec.json</span></code></a><a class="headerlink" href="#behavior-in-spec-json" title="Permalink to this headline">¶</a></h2>
<p>There are three alternative sub-blocks available inside <code class="docutils literal notranslate"><span class="pre">behaviour</span></code> block:</p>
<ul class="simple">
<li><strong>service-mapping</strong> - defines mapping rules for input and output data for typical SDK
method (this way will be described below)</li>
<li><strong>none</strong> - could be used in case UI method is not supposed to run any service function
(for instance when input parameters should be passed into widget directly)</li>
<li><strong>script-mapping</strong> - support for legacy software not recommended to use in SDK repos</li>
</ul>
<p>In most cases <code class="docutils literal notranslate"><span class="pre">service-mapping</span></code> sub-block should be used. Here is the list of sub-elements
available inside <code class="docutils literal notranslate"><span class="pre">service-mapping</span></code>:</p>
<ul class="simple">
<li><strong>url</strong> - defines URL end-point of deployed service (in case of SDK repos the convention
requires to keep this parameter empty)</li>
<li><strong>name</strong> - module name of SDK repo registered in catalog (see module name in KIDL
specification)</li>
<li><strong>method</strong> - name of service function to be called (see funcdef in KIDL specification)</li>
<li><strong>input_mapping</strong> - defines rules for mapping UI parameters onto service function input
arguments</li>
<li><strong>output_mapping</strong> - defines rules for mapping output results returned from service
function onto input options of visualizing widget showing these results</li>
</ul>
<p>Both <code class="docutils literal notranslate"><span class="pre">input_mapping</span></code> and <code class="docutils literal notranslate"><span class="pre">output_mapping</span></code> sub-blocks are arrays of mapping items. Each
mapping array is an object with following optional properties:</p>
<ul class="simple">
<li><strong>input_parameter</strong> - ID of UI input parameter to be used as a source of mapping</li>
<li><strong>constant_value</strong> - constant value to be used as a source of mapping</li>
<li><strong>narrative_system_variable</strong> - system variable in narrative back-end to be used as a
source of mapping (only <code class="docutils literal notranslate"><span class="pre">workspace</span></code> variable is currently officially supported)</li>
<li><strong>target_property</strong> - name of structure field to be set as a target of mapping</li>
<li><strong>target_argument_position</strong> (allowed for input mapping items only, default value is 0) position of input argument of service function to be set as a target of mapping</li>
<li><strong>target_type_transform</strong> - optional rule allowing to modify passing value; here is the list of
allowed transformations:</li>
<li><strong>none</strong> (default value in case it not defined) - no modification</li>
<li><strong>ref</strong> - changes object name into workspace reference by adding prefix with
workspace name followed by <code class="docutils literal notranslate"><span class="pre">/</span></code></li>
<li><strong>int</strong> - treats text value as an integer</li>
<li><strong>list&lt;inner-transformation&gt;</strong> - tries to prepare list of items or just iterate over items
if it’s a list already applying inner-transformation to each element</li>
<li><strong>service_method_output_path</strong> (allowed for output mapping items only) - defines
JSON-path into output prepared for widget as a place for target value; if this path is
empty array it corresponds to root point and all the data returned from service function
will be captured</li>
</ul>
<p>In group of source properties (<code class="docutils literal notranslate"><span class="pre">input_parameter</span></code>, <code class="docutils literal notranslate"><span class="pre">constant_value</span></code>,
<code class="docutils literal notranslate"><span class="pre">narrative_system_variable</span></code>) only one can be used. For target properties both <code class="docutils literal notranslate"><span class="pre">target_property</span></code>
and <code class="docutils literal notranslate"><span class="pre">target_argument_position</span></code> can be used at the same time meaning that service function will
get as argument with position from <code class="docutils literal notranslate"><span class="pre">target_argument_position</span></code> an object with property having
name from <code class="docutils literal notranslate"><span class="pre">target_property</span></code> with target value.</p>
<div class="section" id="example-for-mappings-in-spec-json">
<h3><a class="toc-backref" href="#id11">Example for mappings in <code class="docutils literal notranslate"><span class="pre">spec.json</span></code></a><a class="headerlink" href="#example-for-mappings-in-spec-json" title="Permalink to this headline">¶</a></h3>
<p>Let’s consider some example of mappings defined in <code class="docutils literal notranslate"><span class="pre">service-mapping</span></code> sub-block of
<code class="docutils literal notranslate"><span class="pre">behaviour</span></code>. Suppose we have function <code class="docutils literal notranslate"><span class="pre">func1</span></code> in module <code class="docutils literal notranslate"><span class="pre">module1</span></code> where we expect to get as
input two arguments: a string and an object with internal field <code class="docutils literal notranslate"><span class="pre">input_prop</span></code> (in JSON this
argument looks like <code class="docutils literal notranslate"><span class="pre">{&quot;input_prop&quot;:</span> <span class="pre">&quot;...&quot;}</span></code>). And we have two UI parameters of type <code class="docutils literal notranslate"><span class="pre">text</span></code> with IDs
<code class="docutils literal notranslate"><span class="pre">param1</span></code> and <code class="docutils literal notranslate"><span class="pre">param2</span></code>. Output returned from the function is an array of objects containing only
one object which has internal field <code class="docutils literal notranslate"><span class="pre">output_prop</span></code>. Value of this field should be mapped to
<code class="docutils literal notranslate"><span class="pre">option1</span></code> option in UI widget. In this case we will have following mappings:</p>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="s2">&quot;behavior&quot;</span> <span class="o">:</span> <span class="p">{</span>
    <span class="s2">&quot;service-mapping&quot;</span> <span class="o">:</span> <span class="p">{</span>
    <span class="s2">&quot;url&quot;</span> <span class="o">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
    <span class="s2">&quot;name&quot;</span> <span class="o">:</span> <span class="s2">&quot;module1&quot;</span><span class="p">,</span>
    <span class="s2">&quot;method&quot;</span> <span class="o">:</span> <span class="s2">&quot;func1&quot;</span><span class="p">,</span>
    <span class="s2">&quot;input_mapping&quot;</span> <span class="o">:</span> <span class="p">[</span>
        <span class="p">{</span>
            <span class="s2">&quot;input_parameter&quot;</span><span class="o">:</span> <span class="s2">&quot;param1&quot;</span>
            <span class="s2">&quot;target_argument_position&quot;</span><span class="o">:</span> <span class="mi">0</span>
        <span class="p">},</span> <span class="p">{</span>
            <span class="s2">&quot;input_parameter&quot;</span><span class="o">:</span> <span class="s2">&quot;param2&quot;</span><span class="p">,</span>
            <span class="s2">&quot;target_argument_position&quot;</span><span class="o">:</span> <span class="mi">1</span><span class="p">,</span>
            <span class="s2">&quot;target_property&quot;</span><span class="o">:</span> <span class="s2">&quot;input_prop&quot;</span>
        <span class="p">}</span>
    <span class="p">],</span>
    <span class="s2">&quot;output_mapping&quot;</span> <span class="o">:</span> <span class="p">[</span>
        <span class="p">{</span>
            <span class="s2">&quot;service_method_output_path&quot;</span><span class="o">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="s2">&quot;output_prop&quot;</span><span class="p">],</span>
            <span class="s2">&quot;target_property&quot;</span><span class="o">:</span> <span class="s2">&quot;option1&quot;</span>
        <span class="p">}</span>
    <span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="display-text-file-display-yaml">
<h2><a class="toc-backref" href="#id12">Display Text file (<code class="docutils literal notranslate"><span class="pre">display.yaml</span></code>)</a><a class="headerlink" href="#display-text-file-display-yaml" title="Permalink to this headline">¶</a></h2>
<p>This file has Yaml format. Here is the list of top-level block names:</p>
<ul class="simple">
<li>name - name of method listed in UI</li>
<li>tooltip - more detailed explanation about the method shown on mouse-over event</li>
<li>screenshots - list of names of screenshot files from <code class="docutils literal notranslate"><span class="pre">img</span></code> sub-folder</li>
<li>icon (optional) - name of icon file from <code class="docutils literal notranslate"><span class="pre">img</span></code> sub-folder</li>
<li>method-suggestions - list of objects defining the set of other methods that could be
suggested to the user as related ones; there are two sub-elements <code class="docutils literal notranslate"><span class="pre">related</span></code> and <code class="docutils literal notranslate"><span class="pre">next</span></code>
pointing to arrays of method IDs</li>
<li>parameters - a map from parameter IDs defined in <code class="docutils literal notranslate"><span class="pre">spec.json</span></code> to objects designed to
add textual information to these parameters (see details below)</li>
<li>description - very detailed explanation about what and how the method does; it appears
on separate web page describing this method</li>
<li>publications (optional) - list of objects describing publications; each object includes two
fields: <code class="docutils literal notranslate"><span class="pre">display-text</span></code> containing reference to scientific journal and <code class="docutils literal notranslate"><span class="pre">link</span></code> with URL to online
resource</li>
</ul>
<p>Each parameter is a pair in parameter map linking ID of this parameter (the only key of ) and
textual object having following fields:</p>
<ul class="simple">
<li>ui-name - name of parameter used to show given parameter in UI</li>
<li>short-hint - short description shown in front of each parameter on right side of method
input panel in Narrative</li>
<li>long-hint - more detailed explanation available by mouse-over on question-mark sign (in
case it’s the same as short-hint question-mark is not shown)</li>
<li>placeholder (optional) - in case of parameter type is textual (one of <code class="docutils literal notranslate"><span class="pre">text</span></code>, <code class="docutils literal notranslate"><span class="pre">textarea</span></code>,
<code class="docutils literal notranslate"><span class="pre">textsubdata</span></code>) it defines placeholder text shown in gray color explaining the meaning of
value user is going to set.</li>
</ul>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
      
        <a href="KIDL_spec.html" class="btn btn-neutral" title="KIDL Specification" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2018, KBase.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../',
            VERSION:'0.1.18',
            LANGUAGE:'None',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="../_static/jquery.js"></script>
      <script type="text/javascript" src="../_static/underscore.js"></script>
      <script type="text/javascript" src="../_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="../_static/js/theme.js"></script>
  

  <script type="text/javascript">
      jQuery(function () {
          
          SphinxRtdTheme.Navigation.enableSticky();
          
      });
  </script> 

</body>
</html>