

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>How to add UI elements &mdash; KBase SDK 0.1.18 documentation</title>
  

  
  
  
  

  

  
  
    

  

  
    <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/css/custom.css" type="text/css" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="How to edit your app’s Dockerfile" href="edit_your_dockerfile.html" />
    <link rel="prev" title="How to create a report" href="create_a_report.html" /> 

  
  <script src="../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../index.html" class="icon icon-home"> KBase SDK
          

          
            
            <img src="../_static/logo.png" class="logo" alt="Logo"/>
          
          </a>

          
            
            
              <div class="version">
                0.1
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Intro</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../overview.html">Concepts and Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../video_tutorial.html">Video Tutorial</a></li>
</ul>
<p class="caption"><span class="caption-text">Tutorial</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../tutorial/dependencies.html">1. Dependencies &amp; Prerequisites</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tutorial/install.html">2. Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tutorial/initialize.html">3. Initialize the App</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tutorial/setup.html">4. Setup &amp; Configuration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tutorial/implement.html">5. Implement Code</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tutorial/publish.html">6. Publish and Update</a></li>
</ul>
<p class="caption"><span class="caption-text">How-to Guides</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="create_a_report.html">How to create a report</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">How to add UI elements</a></li>
<li class="toctree-l1"><a class="reference internal" href="edit_your_dockerfile.html">How to edit your app’s Dockerfile</a></li>
<li class="toctree-l1"><a class="reference internal" href="fill_out_app_information.html">How to document your app</a></li>
<li class="toctree-l1"><a class="reference internal" href="manual_build.html">Manually build the SDK</a></li>
<li class="toctree-l1"><a class="reference internal" href="run_a_shell_command.html">Run shell commands in your app</a></li>
<li class="toctree-l1"><a class="reference internal" href="work_with_reference_data.html">Work with reference data</a></li>
</ul>
<p class="caption"><span class="caption-text">References &amp; Resources</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../references/module_anatomy.html">Anatomy of an App</a></li>
<li class="toctree-l1"><a class="reference internal" href="../references/FAQ.html">Frequently Asked Questions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../references/troubleshooting.html">Troubleshooting Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../references/dev_guidelines.html">Developer Guidelines</a></li>
<li class="toctree-l1"><a class="reference internal" href="../references/KIDL_spec.html">KIDL Specification</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">KBase SDK</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
      <li>How to add UI elements</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            
              <a href="https://github.com/kbase/kb_sdk_docs//blob/master/source/howtos/add_ui_elements.rst" class="fa fa-github"> Edit on GitHub</a>
            
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="how-to-add-ui-elements">
<h1>How to add UI elements<a class="headerlink" href="#how-to-add-ui-elements" title="Permalink to this headline">¶</a></h1>
<p>Control of Narrative interaction is accomplished in files in the
<code class="docutils literal notranslate"><span class="pre">ui/narrative/methods/&lt;MyMethod&gt;</span></code> directory.</p>
<div class="section" id="configure-the-input-interface">
<h2>Configure the input interface<a class="headerlink" href="#configure-the-input-interface" title="Permalink to this headline">¶</a></h2>
<p>The input options are specified in the “parameters” section of the
spec.json file. In the following example, the user will supply two
required parameters: an input name and an output name. If you specify
‘valid_ws_types’, the user will be presented with a searchable
dropdown of objects that match the specified types. If
“is_output_name” is set to true, the user will be warned if a name
will overwrite an existing object or if the name contains invalid
characters, and a widget displaying that object will appear beneath the
app cell.</p>
<div class="code json highlight-default notranslate"><div class="highlight"><pre><span></span><span class="s2">&quot;parameters&quot;</span><span class="p">:</span> <span class="p">[</span>
    <span class="p">{</span>
        <span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;read_library_name&quot;</span><span class="p">,</span>
        <span class="s2">&quot;optional&quot;</span><span class="p">:</span> <span class="n">false</span><span class="p">,</span>
        <span class="s2">&quot;advanced&quot;</span><span class="p">:</span> <span class="n">false</span><span class="p">,</span>
        <span class="s2">&quot;allow_multiple&quot;</span><span class="p">:</span> <span class="n">false</span><span class="p">,</span>
        <span class="s2">&quot;default_values&quot;</span><span class="p">:</span> <span class="p">[</span> <span class="s2">&quot;&quot;</span> <span class="p">],</span>
        <span class="s2">&quot;field_type&quot;</span><span class="p">:</span> <span class="s2">&quot;text&quot;</span><span class="p">,</span>
        <span class="s2">&quot;text_options&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="s2">&quot;valid_ws_types&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;KBaseAssembly.PairedEndLibrary&quot;</span><span class="p">,</span><span class="s2">&quot;KBaseFile.PairedEndLibrary&quot;</span><span class="p">]</span>
        <span class="p">}</span>
    <span class="p">},</span>
    <span class="p">{</span>
        <span class="s2">&quot;id&quot;</span> <span class="p">:</span> <span class="s2">&quot;output_contigset_name&quot;</span><span class="p">,</span>
        <span class="s2">&quot;optional&quot;</span> <span class="p">:</span> <span class="n">false</span><span class="p">,</span>
        <span class="s2">&quot;advanced&quot;</span> <span class="p">:</span> <span class="n">false</span><span class="p">,</span>
        <span class="s2">&quot;allow_multiple&quot;</span> <span class="p">:</span> <span class="n">false</span><span class="p">,</span>
        <span class="s2">&quot;default_values&quot;</span> <span class="p">:</span> <span class="p">[</span> <span class="s2">&quot;MegaHit.contigs&quot;</span> <span class="p">],</span>
        <span class="s2">&quot;field_type&quot;</span> <span class="p">:</span> <span class="s2">&quot;text&quot;</span><span class="p">,</span>
        <span class="s2">&quot;text_options&quot;</span> <span class="p">:</span> <span class="p">{</span>
            <span class="s2">&quot;valid_ws_types&quot;</span> <span class="p">:</span> <span class="p">[</span> <span class="s2">&quot;KBaseGenomes.ContigSet&quot;</span> <span class="p">],</span>
            <span class="s2">&quot;is_output_name&quot;</span><span class="p">:</span><span class="n">true</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">],</span>
</pre></div>
</div>
<p>Another common input type is a dropdown, which is demonstrated below.
For each option, the “value” is what will be passed to the app while the
“ui_name” is what the user will see. In this example, the parameter is
hidden by default because “advanced” is true (meaning the parameter will
be hidden in the “Advanced options” section of the input widget).</p>
<div class="code json highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;prune&quot;</span><span class="p">,</span>
    <span class="s2">&quot;optional&quot;</span><span class="p">:</span> <span class="n">false</span><span class="p">,</span>
    <span class="s2">&quot;advanced&quot;</span><span class="p">:</span> <span class="n">true</span><span class="p">,</span>
    <span class="s2">&quot;allow_multiple&quot;</span><span class="p">:</span> <span class="n">false</span><span class="p">,</span>
    <span class="s2">&quot;default_values&quot;</span><span class="p">:</span> <span class="p">[</span> <span class="s2">&quot;biochemistry&quot;</span> <span class="p">],</span>
    <span class="s2">&quot;field_type&quot;</span><span class="p">:</span> <span class="s2">&quot;dropdown&quot;</span><span class="p">,</span>
    <span class="s2">&quot;dropdown_options&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;options&quot;</span><span class="p">:</span> <span class="p">[</span>
            <span class="p">{</span>
                <span class="s2">&quot;value&quot;</span><span class="p">:</span> <span class="s2">&quot;biochemistry&quot;</span><span class="p">,</span>
                <span class="s2">&quot;display&quot;</span><span class="p">:</span> <span class="s2">&quot;Known biochemistry&quot;</span><span class="p">,</span>
                <span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;biochemistry&quot;</span><span class="p">,</span>
                <span class="s2">&quot;ui_name&quot;</span><span class="p">:</span> <span class="s2">&quot;Known biochemistry&quot;</span>
            <span class="p">},</span>
            <span class="p">{</span>
                <span class="s2">&quot;value&quot;</span><span class="p">:</span> <span class="s2">&quot;model&quot;</span><span class="p">,</span>
                <span class="s2">&quot;display&quot;</span><span class="p">:</span> <span class="s2">&quot;Input model&quot;</span><span class="p">,</span>
                <span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;model&quot;</span><span class="p">,</span>
                <span class="s2">&quot;ui_name&quot;</span><span class="p">:</span> <span class="s2">&quot;Input model&quot;</span>
            <span class="p">},</span>
            <span class="p">{</span>
                <span class="s2">&quot;value&quot;</span><span class="p">:</span> <span class="s2">&quot;none&quot;</span><span class="p">,</span>
                <span class="s2">&quot;display&quot;</span><span class="p">:</span> <span class="s2">&quot;Do not prune&quot;</span><span class="p">,</span>
                <span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;none&quot;</span><span class="p">,</span>
                <span class="s2">&quot;ui_name&quot;</span><span class="p">:</span> <span class="s2">&quot;Do not prune&quot;</span>
            <span class="p">}</span>
        <span class="p">]</span>
    <span class="p">}</span>
<span class="p">},</span>
</pre></div>
</div>
<p>There are many additional interface options available. One of the best
ways to discover them is to explore <a class="reference external" href="https://narrative.kbase.us/narrative/ws.23109.obj.1">this
gallery</a> which
contains a variety of KBase apps along with the spec file that generated
the user interface.</p>
</div>
<div class="section" id="configure-passing-variables-from-narrative-input-to-sdk-method">
<h2>Configure passing variables from Narrative Input to SDK method<a class="headerlink" href="#configure-passing-variables-from-narrative-input-to-sdk-method" title="Permalink to this headline">¶</a></h2>
<p>In the ‘behavior’ section of the spec.json, the output of the user
interface is mapped to input to your function. If you have maintained a
consistent naming though these mappings can be pretty pro forma.
However, transformations can also be applied to input from the user
interface.</p>
<p>In the example below, the user interface accepts the names of assemblies
from the user and transforms them into object references before passing
them on to the method. (This prevents a race condition from occurring if
multiple apps are writing to the same object name or if the object is
renamed.) In the output mapping, the output (a single object in this
example) is unpacked into target properties. These output properties are
used to visualize the result of the app (thus the need to return
information about the report object).</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="s2">&quot;behavior&quot;</span> <span class="p">:</span> <span class="p">{</span>
    <span class="s2">&quot;service-mapping&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="s2">&quot;url&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
            <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;kb_quast&quot;</span><span class="p">,</span>
            <span class="s2">&quot;method&quot;</span><span class="p">:</span> <span class="s2">&quot;run_QUAST_app&quot;</span><span class="p">,</span>
            <span class="s2">&quot;input_mapping&quot;</span><span class="p">:</span> <span class="p">[</span>
                <span class="p">{</span>
                    <span class="s2">&quot;narrative_system_variable&quot;</span><span class="p">:</span> <span class="s2">&quot;workspace&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;target_property&quot;</span><span class="p">:</span> <span class="s2">&quot;workspace_name&quot;</span>
                <span class="p">},</span>
                <span class="p">{</span>
                    <span class="s2">&quot;input_parameter&quot;</span><span class="p">:</span> <span class="s2">&quot;assemblies&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;target_type_transform&quot;</span><span class="p">:</span> <span class="s2">&quot;list&lt;ref&gt;&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;target_property&quot;</span><span class="p">:</span> <span class="s2">&quot;assemblies&quot;</span>
                <span class="p">}</span>
            <span class="p">],</span>
            <span class="s2">&quot;output_mapping&quot;</span><span class="p">:</span> <span class="p">[</span>
                <span class="p">{</span>
                    <span class="s2">&quot;service_method_output_path&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="s2">&quot;report_name&quot;</span><span class="p">],</span>
                    <span class="s2">&quot;target_property&quot;</span><span class="p">:</span> <span class="s2">&quot;report_name&quot;</span>
                <span class="p">},</span>
                <span class="p">{</span>
                    <span class="s2">&quot;service_method_output_path&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="s2">&quot;report_ref&quot;</span><span class="p">],</span>
                    <span class="s2">&quot;target_property&quot;</span><span class="p">:</span> <span class="s2">&quot;report_ref&quot;</span>
                <span class="p">},</span>
                <span class="p">{</span>
                    <span class="s2">&quot;constant_value&quot;</span><span class="p">:</span> <span class="s2">&quot;5&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;target_property&quot;</span><span class="p">:</span> <span class="s2">&quot;report_window_line_height&quot;</span>
                <span class="p">},</span>
                <span class="p">{</span>
                    <span class="s2">&quot;service_method_output_path&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">],</span>
                    <span class="s2">&quot;target_property&quot;</span><span class="p">:</span> <span class="s2">&quot;QUAST_result&quot;</span>
                <span class="p">},</span>
                <span class="p">{</span>
                    <span class="s2">&quot;input_parameter&quot;</span><span class="p">:</span> <span class="s2">&quot;assemblies&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;target_property&quot;</span><span class="p">:</span> <span class="s2">&quot;input_assemblies&quot;</span>
                <span class="p">},</span>
                <span class="p">{</span>
                    <span class="s2">&quot;narrative_system_variable&quot;</span><span class="p">:</span> <span class="s2">&quot;workspace&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;target_property&quot;</span><span class="p">:</span> <span class="s2">&quot;workspace_name&quot;</span>
                <span class="p">}</span>
            <span class="p">]</span>
        <span class="p">}</span>
    <span class="p">}</span>
</pre></div>
</div>
<p>In the above example the Narrative take an object looking like this from
the App UI:</p>
<div class="code json highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="s2">&quot;assemblies&quot;</span><span class="p">:</span> <span class="p">[</span>
    <span class="s2">&quot;AssemblyA&quot;</span><span class="p">,</span>
    <span class="s2">&quot;AssemblyB&quot;</span>
  <span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
<p>and passes an object looking like this to the implementation function:</p>
<div class="code json highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="s2">&quot;assemblies&quot;</span><span class="p">:</span> <span class="p">[</span>
    <span class="s2">&quot;765/1/1&quot;</span><span class="p">,</span>
    <span class="s2">&quot;765/2/1&quot;</span>
  <span class="p">],</span>
  <span class="s2">&quot;Workspace_name&quot;</span><span class="p">:</span> <span class="s2">&quot;&lt;username&gt;:narrative_&lt;long_number&gt;&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Similarly, the Narrative accepts an output object like this:</p>
<div class="code json highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span>
  <span class="p">{</span>
    <span class="s2">&quot;report_name&quot;</span><span class="p">:</span> <span class="s2">&quot;QUAST_Report_&lt;uuid&gt;&quot;</span><span class="p">,</span>
    <span class="s2">&quot;report_ref&quot;</span><span class="p">:</span> <span class="s2">&quot;765/3/1&quot;</span>
  <span class="p">}</span>
<span class="p">]</span>
</pre></div>
</div>
<p>And presents an object like this one to the report visualization:</p>
<div class="code json highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;report_name&quot;</span><span class="p">:</span> <span class="s2">&quot;QUAST_Report_&lt;uuid&gt;&quot;</span><span class="p">,</span>
    <span class="s2">&quot;report_ref&quot;</span><span class="p">:</span> <span class="s2">&quot;765/3/1&quot;</span><span class="p">,</span>
    <span class="s2">&quot;report_window_line_height&quot;</span><span class="p">:</span> <span class="mi">5</span><span class="p">,</span>
    <span class="s2">&quot;QUAST_result&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;report_name&quot;</span><span class="p">:</span> <span class="s2">&quot;QUAST_Report_&lt;uuid&gt;&quot;</span><span class="p">,</span>
        <span class="s2">&quot;report_ref&quot;</span><span class="p">:</span> <span class="s2">&quot;765/3/1&quot;</span>
    <span class="p">},</span>
    <span class="s2">&quot;assemblies&quot;</span><span class="p">:</span> <span class="p">[</span>
    <span class="s2">&quot;AssemblyA&quot;</span><span class="p">,</span>
    <span class="s2">&quot;AssemblyB&quot;</span>
    <span class="p">],</span>
    <span class="s2">&quot;Workspace_name&quot;</span><span class="p">:</span> <span class="s2">&quot;&lt;username&gt;:narrative_&lt;long_number&gt;&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="naming-fields-in-the-input-widget-cell">
<h2>Naming fields in the input widget cell<a class="headerlink" href="#naming-fields-in-the-input-widget-cell" title="Permalink to this headline">¶</a></h2>
<p>The <code class="docutils literal notranslate"><span class="pre">display.yaml</span></code> file primarily contains text to describe the app (shown in the narrative and in the app catalog). Minimally this file should define:</p>
<ul class="simple">
<li>A module name</li>
<li>A module tooltip</li>
<li>A ui-name for each parameter</li>
<li>A short hint for each parameter</li>
</ul>
</div>
<div class="section" id="details-on-narrative-ui-specification">
<h2>Details on Narrative UI specification<a class="headerlink" href="#details-on-narrative-ui-specification" title="Permalink to this headline">¶</a></h2>
<p>Further details on specification of Narrative app interfaces are
available
<a class="reference external" href="https://docs.google.com/document/d/1CZ1GOKsRr1NsScG9E2EesJyk_ViOrM9OazrVFKCkyHs/edit">here</a></p>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="edit_your_dockerfile.html" class="btn btn-neutral float-right" title="How to edit your app’s Dockerfile" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="create_a_report.html" class="btn btn-neutral" title="How to create a report" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2018, KBase.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../',
            VERSION:'0.1.18',
            LANGUAGE:'None',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="../_static/jquery.js"></script>
      <script type="text/javascript" src="../_static/underscore.js"></script>
      <script type="text/javascript" src="../_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="../_static/js/theme.js"></script>
  

  <script type="text/javascript">
      jQuery(function () {
          
          SphinxRtdTheme.Navigation.enableSticky();
          
      });
  </script> 

</body>
</html>