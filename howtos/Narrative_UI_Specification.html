

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Narrative App UI Specification &mdash; KBase SDK 0.1.18 documentation</title>
  

  
  
  
  

  

  
  
    

  

  
    <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/css/custom.css" type="text/css" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" /> 

  
  <script src="../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../index.html" class="icon icon-home"> KBase SDK
          

          
            
            <img src="../_static/logo.png" class="logo" alt="Logo"/>
          
          </a>

          
            
            
              <div class="version">
                0.1
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Intro</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../overview.html">Concepts and Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../video_tutorial.html">Video Tutorial</a></li>
</ul>
<p class="caption"><span class="caption-text">Tutorial</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../tutorial/dependencies.html">1. Dependencies &amp; Prerequisites</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tutorial/install.html">2. Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tutorial/initialize.html">3. Initialize the Module</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tutorial/helloworld.html">4. Hello World Example</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tutorial/setup.html">5. ContigFilter Example</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tutorial/inputsoutputs.html">6. Narrative User Interface</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tutorial/implement.html">7. Implement Code</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tutorial/publish.html">8. Publish and Update</a></li>
</ul>
<p class="caption"><span class="caption-text">Developer Guides</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../references/questions_and_answers.html">Common Questions</a></li>
<li class="toctree-l1"><a class="reference internal" href="create_a_report.html">Creating reports</a></li>
<li class="toctree-l1"><a class="reference internal" href="add_ui_elements.html">Adding UI Elements</a></li>
<li class="toctree-l1"><a class="reference internal" href="edit_your_dockerfile.html">Editing your app’s Dockerfile</a></li>
<li class="toctree-l1"><a class="reference internal" href="fill_out_app_information.html">Fully documenting your app</a></li>
<li class="toctree-l1"><a class="reference internal" href="run_a_shell_command.html">Running shell commands</a></li>
<li class="toctree-l1"><a class="reference internal" href="file_utils.html">Working with the file utils</a></li>
</ul>
<p class="caption"><span class="caption-text">Advanced Guides</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="workspace.html">Using Workspace Metadata</a></li>
<li class="toctree-l1"><a class="reference internal" href="manual_build.html">Manually building the SDK</a></li>
<li class="toctree-l1"><a class="reference internal" href="work_with_reference_data.html">Working with reference data</a></li>
<li class="toctree-l1"><a class="reference internal" href="job_manager.html">Listing and viewing jobs</a></li>
<li class="toctree-l1"><a class="reference internal" href="dynamic_services.html">Dynamic Services</a></li>
<li class="toctree-l1"><a class="reference internal" href="update_to_py3.html">Updating a module to Python3</a></li>
</ul>
<p class="caption"><span class="caption-text">References &amp; Resources</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../references/module_anatomy.html">Anatomy of an App</a></li>
<li class="toctree-l1"><a class="reference internal" href="../references/troubleshooting.html">Troubleshooting Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../references/dev_guidelines.html">Developer Guidelines</a></li>
<li class="toctree-l1"><a class="reference internal" href="../references/KIDL_spec.html">KIDL Specification</a></li>
<li class="toctree-l1"><a class="reference internal" href="../references/UI_spec.html">Narrative App UI Specification</a></li>
<li class="toctree-l1"><a class="reference internal" href="../references/terminology.html">Terminology</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">KBase SDK</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
      <li>Narrative App UI Specification</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            
              <a href="https://github.com/kbase/kb_sdk_docs/blob/blob/master/source/howtos/Narrative_UI_Specification.rst" class="fa fa-github"> Edit on GitHub</a>
            
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="narrative-app-ui-specification">
<h1><a class="toc-backref" href="#id11">Narrative App UI Specification</a><a class="headerlink" href="#narrative-app-ui-specification" title="Permalink to this headline">¶</a></h1>
<div class="contents topic" id="contents">
<p class="topic-title first">Contents</p>
<ul class="simple">
<li><a class="reference internal" href="#narrative-app-ui-specification" id="id11">Narrative App UI Specification</a><ul>
<li><a class="reference internal" href="#structure-of-folders-and-files" id="id12">Structure of Folders and Files</a></li>
<li><a class="reference internal" href="#structural-file-spec-json" id="id13">Structural file (<code class="docutils literal notranslate"><span class="pre">spec.json</span></code>)</a></li>
<li><a class="reference internal" href="#parameters-in-spec-json" id="id14">Parameters in <code class="docutils literal notranslate"><span class="pre">spec.json</span></code></a></li>
<li><a class="reference internal" href="#options-for-text-parameter-type-in-spec-json" id="id15">Options for text parameter type in <code class="docutils literal notranslate"><span class="pre">spec.json</span></code></a></li>
<li><a class="reference internal" href="#options-for-drop-down-parameter-type-in-spec-json" id="id16">Options for drop-down parameter type in <code class="docutils literal notranslate"><span class="pre">spec.json</span></code></a></li>
<li><a class="reference internal" href="#options-for-checkbox-parameter-type-in-spec-json" id="id17">Options for checkbox parameter type in <code class="docutils literal notranslate"><span class="pre">spec.json</span></code></a></li>
<li><a class="reference internal" href="#options-for-textarea-parameter-type-in-spec-json" id="id18">Options for textarea parameter type in <code class="docutils literal notranslate"><span class="pre">spec.json</span></code></a></li>
<li><a class="reference internal" href="#options-for-textsubdata-parameter-type-in-spec-json" id="id19">Options for textsubdata parameter type in <code class="docutils literal notranslate"><span class="pre">spec.json</span></code></a></li>
<li><a class="reference internal" href="#behavior-in-spec-json" id="id20">Behavior in <code class="docutils literal notranslate"><span class="pre">spec.json</span></code></a></li>
<li><a class="reference internal" href="#example-for-mappings-in-spec-json" id="id21">Example for mappings in <code class="docutils literal notranslate"><span class="pre">spec.json</span></code></a></li>
<li><a class="reference internal" href="#display-text-file-display-yaml" id="id22">Display Text file (<code class="docutils literal notranslate"><span class="pre">display.yaml</span></code>)</a></li>
</ul>
</li>
</ul>
</div>
<p>This document describes how the UI components of Narrative Apps are specified via fields in <code class="docutils literal notranslate"><span class="pre">spec.json</span></code> and <code class="docutils literal notranslate"><span class="pre">display.yaml</span></code> files. These spec files include input and output parameters for the app.</p>
<div class="section" id="structure-of-folders-and-files">
<h2><a class="toc-backref" href="#id12">Structure of Folders and Files</a><a class="headerlink" href="#structure-of-folders-and-files" title="Permalink to this headline">¶</a></h2>
<p>To introduce UI specifications of Apps in an SDK repo you have to keep files and folders in a particular structure. Currently all UI method specifications (method-specs) live in <code class="docutils literal notranslate"><span class="pre">ui/narrative/methods/</span></code> path. Each method has its own subfolder with the name meaning the app or method ID. Inside this folder a typical method has a <code class="docutils literal notranslate"><span class="pre">spec.json</span></code> file defining structural input/output and parameter type components, a <code class="docutils literal notranslate"><span class="pre">display.yaml</span></code> file defining display text and <code class="docutils literal notranslate"><span class="pre">img</span></code> subfolder containing icon and screenshot files.</p>
</div>
<div class="section" id="structural-file-spec-json">
<h2><a class="toc-backref" href="#id13">Structural file (<code class="docutils literal notranslate"><span class="pre">spec.json</span></code>)</a><a class="headerlink" href="#structural-file-spec-json" title="Permalink to this headline">¶</a></h2>
<p>This is a file in JSON format containing these top-level properties:</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">ver:</th><td class="field-body">version of each UI method-spec</td>
</tr>
<tr class="field-even field"><th class="field-name">authors:</th><td class="field-body">list of GlobusOnline accounts of contributers</td>
</tr>
<tr class="field-odd field"><th class="field-name">contact:</th><td class="field-body">e-mail of contact person</td>
</tr>
<tr class="field-even field"><th class="field-name">categories:</th><td class="field-body">list of tags (from fixed set of supported tags) categorizing this method into one or more groups shown in navigation interface as set of filters; in case particular method should be made invisible then <code class="docutils literal notranslate"><span class="pre">inactive</span></code> category should be added to this list (in place of <code class="docutils literal notranslate"><span class="pre">active</span></code> category if it’s present)</td>
</tr>
<tr class="field-odd field"><th class="field-name">widgets:</th><td class="field-body">structure defining <code class="docutils literal notranslate"><span class="pre">input</span></code> and <code class="docutils literal notranslate"><span class="pre">output</span></code> widgets (typically <code class="docutils literal notranslate"><span class="pre">input</span></code> widget is set to null meaning that standard one is used); <code class="docutils literal notranslate"><span class="pre">output</span></code> widget points to name of JavaScript widget supported by Narrative</td>
</tr>
<tr class="field-even field"><th class="field-name">parameters:</th><td class="field-body">list structures defining each parameter type and other features except name (which is defined in <code class="docutils literal notranslate"><span class="pre">display.yaml</span></code> file)</td>
</tr>
<tr class="field-odd field"><th class="field-name">behavior:</th><td class="field-body">block of settings for mapping UI parameters to service function input parameters and separately for mapping from output results returned from service function to what should be passed to visualizing widget to show these results</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">job_id_output_field:</th></tr>
<tr class="field-even field"><td>&#160;</td><td class="field-body">field for support of legacy code; for SDK method it should always be set into <code class="docutils literal notranslate"><span class="pre">docker</span></code> value</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="parameters-in-spec-json">
<h2><a class="toc-backref" href="#id14">Parameters in <code class="docutils literal notranslate"><span class="pre">spec.json</span></code></a><a class="headerlink" href="#parameters-in-spec-json" title="Permalink to this headline">¶</a></h2>
<p>Each structure in array defined in <code class="docutils literal notranslate"><span class="pre">parameters</span></code> field defines one parameter shown in UI input panel of this method. Here is the list of main properties of parameter structure:</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">id:</th><td class="field-body">ID of parameter for referring to it from <code class="docutils literal notranslate"><span class="pre">display.yaml</span></code> file and from mapping settings of <code class="docutils literal notranslate"><span class="pre">behavior</span></code> block</td>
</tr>
<tr class="field-even field"><th class="field-name">optional:</th><td class="field-body">flag defining whether UI interface allows empty value for this parameter or it requires it to be set to something non-empty</td>
</tr>
<tr class="field-odd field"><th class="field-name">advanced:</th><td class="field-body">flag defining whether UI interface moves this parameter into <code class="docutils literal notranslate"><span class="pre">Advanced</span> <span class="pre">parameters</span></code> group collapsed by default or this parameter is listed in normal order</td>
</tr>
<tr class="field-even field"><th class="field-name">allow_multiple:</th><td class="field-body">flag defining whether UI interface allows to define more than one value for this parameter and then treat these values as an array of values rather than one textual/numeric/boolean value</td>
</tr>
<tr class="field-odd field"><th class="field-name">default_values:</th><td class="field-body">if set to any non-empty string this value will appear as pre-defined one</td>
</tr>
<tr class="field-even field"><th class="field-name">field_type:</th><td class="field-body">type of parameter, could be one of <code class="docutils literal notranslate"><span class="pre">text</span></code>, <code class="docutils literal notranslate"><span class="pre">dropdown</span></code>, <code class="docutils literal notranslate"><span class="pre">checkbox</span></code>, <code class="docutils literal notranslate"><span class="pre">textarea</span></code>, <code class="docutils literal notranslate"><span class="pre">textsubdata</span></code></td>
</tr>
<tr class="field-odd field"><th class="field-name">text_options:</th><td class="field-body">optional block defining details of <code class="docutils literal notranslate"><span class="pre">text</span></code> type</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">dropdown_options:</th></tr>
<tr class="field-even field"><td>&#160;</td><td class="field-body">optional block defining details of <code class="docutils literal notranslate"><span class="pre">dropdown</span></code> type - <a class="reference external" href="https://github.com/kbaseapps/fba_tools/blob/master/ui/narrative/methods/build_metabolic_model/spec.json">Example</a></td>
</tr>
<tr class="field-odd field"><th class="field-name" colspan="2">checkbox_options:</th></tr>
<tr class="field-odd field"><td>&#160;</td><td class="field-body">optional block defining details of <code class="docutils literal notranslate"><span class="pre">checkbox</span></code> type - <a class="reference external" href="https://github.com/kbaseapps/fba_tools/blob/master/ui/narrative/methods/simulate_growth_on_phenotype_data/spec.json">Example</a></td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">textarea_options:</th></tr>
<tr class="field-even field"><td>&#160;</td><td class="field-body">optional block defining details of <code class="docutils literal notranslate"><span class="pre">textarea</span></code> type - <a class="reference external" href="https://github.com/kbaseapps/fba_tools/blob/master/ui/narrative/methods/build_multiple_metabolic_models/spec.json">Example</a></td>
</tr>
<tr class="field-odd field"><th class="field-name" colspan="2">textsubdata_options:</th></tr>
<tr class="field-odd field"><td>&#160;</td><td class="field-body">optional block defining details of <code class="docutils literal notranslate"><span class="pre">textsubdata</span></code> type - <a class="reference external" href="https://github.com/kbaseapps/fba_tools/blob/master/ui/narrative/methods/compare_flux_with_expression/spec.json">Example</a></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="options-for-text-parameter-type-in-spec-json">
<h2><a class="toc-backref" href="#id15">Options for text parameter type in <code class="docutils literal notranslate"><span class="pre">spec.json</span></code></a><a class="headerlink" href="#options-for-text-parameter-type-in-spec-json" title="Permalink to this headline">¶</a></h2>
<p>Options in <code class="docutils literal notranslate"><span class="pre">text_options</span></code> block allow to specify many different ways of validation and behavior. Field named <code class="docutils literal notranslate"><span class="pre">valid_ws_types</span></code> connects a parameter with one or more types of objects stored in Workspace KBase storage. In this mode Narrative interface will show available objects of listed types as drop-down for this parameter. For instance here is an example of <code class="docutils literal notranslate"><span class="pre">text_options</span></code> allowing to choose one of Genome objects stored in workspace:</p>
<div class="code json highlight-default notranslate"><div class="highlight"><pre><span></span><span class="s2">&quot;text_options&quot;</span> <span class="p">:</span> <span class="p">{</span>
    <span class="s2">&quot;valid_ws_types&quot;</span> <span class="p">:</span> <span class="p">[</span> <span class="s2">&quot;KBaseGenomes.Genome&quot;</span> <span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
<p>If you would like to mark this parameter as output which means UI interface shouldn’t require chosen object to be present in Workspace storage you can set <code class="docutils literal notranslate"><span class="pre">is_output_name</span></code> sub-option to true like:</p>
<div class="code js highlight-default notranslate"><div class="highlight"><pre><span></span><span class="s2">&quot;text_options&quot;</span> <span class="p">:</span> <span class="p">{</span>
    <span class="s2">&quot;valid_ws_types&quot;</span> <span class="p">:</span> <span class="p">[</span> <span class="s2">&quot;KBaseGenomes.Genome&quot;</span> <span class="p">],</span>
    <span class="s2">&quot;is_output_name&quot;</span> <span class="p">:</span> <span class="n">true</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Another sub-option is <code class="docutils literal notranslate"><span class="pre">validate_as</span></code> allowing to validate value entered in UI as <code class="docutils literal notranslate"><span class="pre">int</span></code> or <code class="docutils literal notranslate"><span class="pre">float</span></code>. If you what some parameter to be an integer with minimum and/or maximum limits you can use properties like in this example:</p>
<div class="code js highlight-default notranslate"><div class="highlight"><pre><span></span><span class="s2">&quot;text_options&quot;</span> <span class="p">:</span> <span class="p">{</span>
    <span class="s2">&quot;valid_ws_types&quot;</span> <span class="p">:</span> <span class="p">[</span> <span class="p">],</span>
    <span class="s2">&quot;validate_as&quot;</span><span class="p">:</span> <span class="s2">&quot;int&quot;</span><span class="p">,</span>
    <span class="s2">&quot;min_int&quot;</span> <span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
    <span class="s2">&quot;max_int&quot;</span> <span class="p">:</span> <span class="mi">200</span>
<span class="p">}</span>
</pre></div>
</div>
<p>And similarly for float type:</p>
<div class="code js highlight-default notranslate"><div class="highlight"><pre><span></span><span class="s2">&quot;text_options&quot;</span> <span class="p">:</span> <span class="p">{</span>
    <span class="s2">&quot;valid_ws_types&quot;</span> <span class="p">:</span> <span class="p">[</span> <span class="p">],</span>
    <span class="s2">&quot;validate_as&quot;</span><span class="p">:</span> <span class="s2">&quot;float&quot;</span><span class="p">,</span>
    <span class="s2">&quot;min_float&quot;</span> <span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
    <span class="s2">&quot;max_float&quot;</span> <span class="p">:</span> <span class="mi">200</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="options-for-drop-down-parameter-type-in-spec-json">
<h2><a class="toc-backref" href="#id16">Options for drop-down parameter type in <code class="docutils literal notranslate"><span class="pre">spec.json</span></code></a><a class="headerlink" href="#options-for-drop-down-parameter-type-in-spec-json" title="Permalink to this headline">¶</a></h2>
<p>There is only one sub-option available inside <code class="docutils literal notranslate"><span class="pre">dropdown_options</span></code> block currently. It has <code class="docutils literal notranslate"><span class="pre">options</span></code> name and value is list of objects defining drop-down items. Each item object should have two properties: <code class="docutils literal notranslate"><span class="pre">value</span></code> defining internal item ID (it’s sent to back-end function when given item is selected) and <code class="docutils literal notranslate"><span class="pre">display</span></code> defining text shown for this item in UI. Here is an example of the whole <code class="docutils literal notranslate"><span class="pre">dropdown_options</span></code> block:</p>
<div class="code js highlight-default notranslate"><div class="highlight"><pre><span></span><span class="s2">&quot;dropdown_options&quot;</span><span class="p">:{</span>
    <span class="s2">&quot;options&quot;</span><span class="p">:</span> <span class="p">[{</span>
        <span class="s2">&quot;value&quot;</span><span class="p">:</span> <span class="s2">&quot;lloyd&quot;</span><span class="p">,</span>
        <span class="s2">&quot;display&quot;</span><span class="p">:</span> <span class="s2">&quot;Lloyd&quot;</span>
    <span class="p">},</span> <span class="p">{</span>
        <span class="s2">&quot;value&quot;</span><span class="p">:</span> <span class="s2">&quot;hartigan_wong&quot;</span><span class="p">,</span>
        <span class="s2">&quot;display&quot;</span><span class="p">:</span> <span class="s2">&quot;Hartigan-Wong&quot;</span>
    <span class="p">},</span> <span class="p">{</span>
        <span class="s2">&quot;value&quot;</span><span class="p">:</span> <span class="s2">&quot;forgy&quot;</span><span class="p">,</span>
        <span class="s2">&quot;display&quot;</span><span class="p">:</span> <span class="s2">&quot;Forgy&quot;</span>
    <span class="p">},</span> <span class="p">{</span>
        <span class="s2">&quot;value&quot;</span><span class="p">:</span> <span class="s2">&quot;mac_queen&quot;</span><span class="p">,</span>
        <span class="s2">&quot;display&quot;</span><span class="p">:</span> <span class="s2">&quot;MacQueen&quot;</span>
    <span class="p">}]</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="options-for-checkbox-parameter-type-in-spec-json">
<h2><a class="toc-backref" href="#id17">Options for checkbox parameter type in <code class="docutils literal notranslate"><span class="pre">spec.json</span></code></a><a class="headerlink" href="#options-for-checkbox-parameter-type-in-spec-json" title="Permalink to this headline">¶</a></h2>
<p>Here is the list of sub-options available inside <code class="docutils literal notranslate"><span class="pre">checkbox_options</span></code> block:</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">checked_value:</th><td class="field-body">defines value to be sent to service function when checkbox is selected</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">unchecked_value:</th></tr>
<tr class="field-even field"><td>&#160;</td><td class="field-body">defines value to be sent to service function when checkbox is not selected</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="options-for-textarea-parameter-type-in-spec-json">
<h2><a class="toc-backref" href="#id18">Options for textarea parameter type in <code class="docutils literal notranslate"><span class="pre">spec.json</span></code></a><a class="headerlink" href="#options-for-textarea-parameter-type-in-spec-json" title="Permalink to this headline">¶</a></h2>
<p>There is only one sub-option available inside <code class="docutils literal notranslate"><span class="pre">textarea_options</span></code> block:</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">n_rows:</th><td class="field-body">defines number of lines shown for this textarea in UI.</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="options-for-textsubdata-parameter-type-in-spec-json">
<h2><a class="toc-backref" href="#id19">Options for textsubdata parameter type in <code class="docutils literal notranslate"><span class="pre">spec.json</span></code></a><a class="headerlink" href="#options-for-textsubdata-parameter-type-in-spec-json" title="Permalink to this headline">¶</a></h2>
<p>This parameter type allows to select items that are parts of workspace object (let’s call them sub-objects). Here is the list of sub-options available inside “textsubdata_options” block:</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">multiselection:</th><td class="field-body">flag (boolean) allowing to have more than one selected object</td>
</tr>
<tr class="field-even field"><th class="field-name">show_src_obj:</th><td class="field-body">flag (boolean) shows name of workspace object where we are selecting sub-objects as well</td>
</tr>
<tr class="field-odd field"><th class="field-name">allow_custom:</th><td class="field-body">flag (boolean)</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">subdata_selection:</th></tr>
<tr class="field-even field"><td>&#160;</td><td class="field-body">main block with following sub-options:</td>
</tr>
<tr class="field-odd field"><th class="field-name" colspan="2">path_to_subdata:</th></tr>
<tr class="field-odd field"><td>&#160;</td><td class="field-body">JSON-path leading to the level of an array of sub-objects (instead of string type JSON-path here is treated as an array of elements)</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">subdata_included:</th></tr>
<tr class="field-even field"><td>&#160;</td><td class="field-body">list of string JSON-paths to be loaded (in case JSON-path leads to certain field inside sub-objects then level of array of sub-objects is denoted as [*])</td>
</tr>
<tr class="field-odd field"><th class="field-name">constant_ref:</th><td class="field-body">static reference to some object in public workspace (alternative to “parameter_id”)</td>
</tr>
<tr class="field-even field"><th class="field-name">parameter_id:</th><td class="field-body">points to ID of another UI parameter used for selection of workspace object where we are selecting sub-objects</td>
</tr>
<tr class="field-odd field"><th class="field-name">selection_id:</th><td class="field-body">name of field of sub-object which will be sent as selected value</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">selection_description:</th></tr>
<tr class="field-even field"><td>&#160;</td><td class="field-body">list of fields of sub-object to be shown for each selectable item</td>
</tr>
<tr class="field-odd field"><th class="field-name" colspan="2">description_template:</th></tr>
<tr class="field-odd field"><td>&#160;</td><td class="field-body">optional template defining the way of representation of fields from <code class="docutils literal notranslate"><span class="pre">selection_description</span></code> (placeholders of fields are defined as {{field-name}})</td>
</tr>
</tbody>
</table>
<p>Here is an example of <code class="docutils literal notranslate"><span class="pre">textsubdata_options</span></code> block for model reactions in KBaseFBA.FBAModel object:</p>
<div class="code js highlight-default notranslate"><div class="highlight"><pre><span></span><span class="s2">&quot;textsubdata_options&quot;</span> <span class="p">:</span> <span class="p">{</span>
  <span class="s2">&quot;subdata_selection&quot;</span><span class="p">:</span> <span class="p">{</span>
    <span class="s2">&quot;parameter_id&quot;</span> <span class="p">:</span> <span class="s2">&quot;input_model&quot;</span><span class="p">,</span>
    <span class="s2">&quot;subdata_included&quot;</span> <span class="p">:</span> <span class="p">[</span><span class="s2">&quot;modelcompounds/[*]/id&quot;</span><span class="p">,</span> <span class="s2">&quot;modelcompounds/[*]/name&quot;</span><span class="p">,</span><span class="s2">&quot;modelcompounds/[*]/formula&quot;</span><span class="p">],</span>
    <span class="s2">&quot;path_to_subdata&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;modelcompounds&quot;</span><span class="p">],</span>
    <span class="s2">&quot;selection_id&quot;</span> <span class="p">:</span> <span class="s2">&quot;id&quot;</span><span class="p">,</span>
    <span class="s2">&quot;selection_description&quot;</span> <span class="p">:</span> <span class="p">[</span><span class="s2">&quot;name&quot;</span><span class="p">,</span><span class="s2">&quot;formula&quot;</span><span class="p">],</span>
    <span class="s2">&quot;description_template&quot;</span> <span class="p">:</span><span class="s2">&quot;- {{name}} ({{formula}})&quot;</span>
  <span class="p">},</span>
  <span class="s2">&quot;multiselection&quot;</span><span class="p">:</span><span class="n">true</span><span class="p">,</span>
  <span class="s2">&quot;show_src_obj&quot;</span><span class="p">:</span><span class="n">false</span><span class="p">,</span>
  <span class="s2">&quot;allow_custom&quot;</span><span class="p">:</span><span class="n">false</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="behavior-in-spec-json">
<h2><a class="toc-backref" href="#id20">Behavior in <code class="docutils literal notranslate"><span class="pre">spec.json</span></code></a><a class="headerlink" href="#behavior-in-spec-json" title="Permalink to this headline">¶</a></h2>
<p>There are three alternative sub-blocks available inside <code class="docutils literal notranslate"><span class="pre">behavior</span></code> block:</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name" colspan="2">service-mapping:</th></tr>
<tr class="field-odd field"><td>&#160;</td><td class="field-body">defines mapping rules for input and output data for typical SDK method (this way will be described below)</td>
</tr>
<tr class="field-even field"><th class="field-name">none:</th><td class="field-body">could be used in case UI method is not supposed to run any service function (for instance when input parameters should be passed into widget directly) - <a class="reference external" href="https://github.com/kbaseapps/kb_cummerbund/blob/master/ui/narrative/methods/view_volcano_plot/spec.json">Example</a></td>
</tr>
<tr class="field-odd field"><th class="field-name">script-mapping:</th><td class="field-body">support for legacy software not recommended to use in SDK repos</td>
</tr>
</tbody>
</table>
<p>In most cases <code class="docutils literal notranslate"><span class="pre">service-mapping</span></code> sub-block should be used. Here is the list of sub-elements available inside <code class="docutils literal notranslate"><span class="pre">service-mapping</span></code>:</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">url:</th><td class="field-body">defines URL end-point of deployed service (in case of SDK repos the convention requires to keep this parameter empty)</td>
</tr>
<tr class="field-even field"><th class="field-name">name:</th><td class="field-body">module name of SDK repo registered in catalog (see module name in KIDL specification)</td>
</tr>
<tr class="field-odd field"><th class="field-name">method:</th><td class="field-body">name of service function to be called (see funcdef in KIDL specification)</td>
</tr>
<tr class="field-even field"><th class="field-name">input_mapping:</th><td class="field-body">defines rules for mapping UI parameters onto service function input arguments</td>
</tr>
<tr class="field-odd field"><th class="field-name">output_mapping:</th><td class="field-body">defines rules for mapping output results returned from service function onto input options of visualizing widget showing these results</td>
</tr>
</tbody>
</table>
<p>Both <code class="docutils literal notranslate"><span class="pre">input_mapping</span></code> and <code class="docutils literal notranslate"><span class="pre">output_mapping</span></code> sub-blocks are arrays of mapping items. Each mapping array is an object with following optional properties:</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name" colspan="2">input_parameter:</th></tr>
<tr class="field-odd field"><td>&#160;</td><td class="field-body"><p class="first">ID of UI input parameter to be used as a source of mapping</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name">constant_value:</th><td class="field-body"><p class="first">constant value to be used as a source of mapping - <a href="#id23"><span class="problematic" id="id24">`Example&lt;https://github.com/kbaseapps/taxonomy_service/blob/master/ui/narrative/methods/create_taxonomy/spec.json&gt;`_</span></a></p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name" colspan="2">narrative_system_variable:</th></tr>
<tr class="field-odd field"><td>&#160;</td><td class="field-body"><p class="first">system variable in narrative back-end to be used as a source of mapping (only <code class="docutils literal notranslate"><span class="pre">workspace</span></code> variable is currently officially supported)</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">target_property:</th></tr>
<tr class="field-even field"><td>&#160;</td><td class="field-body"><p class="first">name of structure field to be set as a target of mapping</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name" colspan="2">target_argument_position:</th></tr>
<tr class="field-odd field"><td>&#160;</td><td class="field-body"><p class="first">(allowed for input mapping items only, default value is 0) - position of input argument of service function to be set as a target of mapping</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">target_type_transform:</th></tr>
<tr class="field-even field"><td>&#160;</td><td class="field-body"><p class="first">optional rule allowing to modify passing value; here is the list of allowed transformations:</p>
<ul class="simple">
<li>none (default value in case it not defined) - no modification</li>
<li>ref - changes object name into workspace reference by adding prefix with workspace name followed by “/”</li>
<li>int - treats text value as an integer</li>
<li>list&lt;inner-transformation&gt; - tries to prepare list of items or just iterate over items if it’s a list already applying inner-transformation to each element</li>
</ul>
</td>
</tr>
<tr class="field-odd field"><th class="field-name" colspan="2">service_method_output_path:</th></tr>
<tr class="field-odd field"><td>&#160;</td><td class="field-body"><p class="first last">(allowed for output mapping items only) - defines JSON-path into output prepared for widget as a place for target value; if this path is empty array it corresponds to root point and all the data returned from service function will be captured - <a class="reference external" href="https://github.com/kbaseapps/FeatureSetUtils/blob/master/ui/narrative/methods/upload_featureset_from_diff_expr/spec.json">Example</a></p>
</td>
</tr>
</tbody>
</table>
<p>In group of source properties (<code class="docutils literal notranslate"><span class="pre">input_parameter</span></code>, <code class="docutils literal notranslate"><span class="pre">constant_value</span></code>, <code class="docutils literal notranslate"><span class="pre">narrative_system_variable</span></code>) only one can be used. For target properties both <code class="docutils literal notranslate"><span class="pre">target_property</span></code> and <code class="docutils literal notranslate"><span class="pre">target_argument_position</span></code> can be used at the same time meaning that service function will get as argument with position from “target_argument_position” an object with property having name from “target_property” with target value.</p>
</div>
<div class="section" id="example-for-mappings-in-spec-json">
<h2><a class="toc-backref" href="#id21">Example for mappings in <code class="docutils literal notranslate"><span class="pre">spec.json</span></code></a><a class="headerlink" href="#example-for-mappings-in-spec-json" title="Permalink to this headline">¶</a></h2>
<p>Let’s consider some example of mappings defined in <code class="docutils literal notranslate"><span class="pre">service-mapping</span></code> sub-block of <code class="docutils literal notranslate"><span class="pre">behavior</span></code>. Suppose we have function <code class="docutils literal notranslate"><span class="pre">func1</span></code> in module <code class="docutils literal notranslate"><span class="pre">module1</span></code> where we expect to get as input two arguments: a string and an object with internal field <code class="docutils literal notranslate"><span class="pre">input_prop</span></code> (in JSON this argument looks like <code class="docutils literal notranslate"><span class="pre">{“input_prop”:</span> <span class="pre">“...”}</span></code>). And we have two UI parameters of type <code class="docutils literal notranslate"><span class="pre">text</span></code> with IDs <code class="docutils literal notranslate"><span class="pre">param1</span></code> and <code class="docutils literal notranslate"><span class="pre">param2</span></code>. Output returned from the function is an array of objects containing only one object which has internal field <code class="docutils literal notranslate"><span class="pre">output_prop</span></code>. Value of this field should be mapped to <code class="docutils literal notranslate"><span class="pre">option1</span></code> option in UI widget. In this case we will have following mappings:</p>
<div class="code js highlight-default notranslate"><div class="highlight"><pre><span></span><span class="s2">&quot;behavior&quot;</span> <span class="p">:</span> <span class="p">{</span>
  <span class="s2">&quot;service-mapping&quot;</span> <span class="p">:</span> <span class="p">{</span>
    <span class="s2">&quot;url&quot;</span> <span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
    <span class="s2">&quot;name&quot;</span> <span class="p">:</span> <span class="s2">&quot;module1&quot;</span><span class="p">,</span>
    <span class="s2">&quot;method&quot;</span> <span class="p">:</span> <span class="s2">&quot;func1&quot;</span><span class="p">,</span>
    <span class="s2">&quot;input_mapping&quot;</span> <span class="p">:</span> <span class="p">[</span>
      <span class="p">{</span>
        <span class="s2">&quot;input_parameter&quot;</span><span class="p">:</span> <span class="s2">&quot;param1&quot;</span>
        <span class="s2">&quot;target_argument_position&quot;</span><span class="p">:</span> <span class="mi">0</span>
      <span class="p">},</span> <span class="p">{</span>
        <span class="s2">&quot;input_parameter&quot;</span><span class="p">:</span> <span class="s2">&quot;param2&quot;</span><span class="p">,</span>
        <span class="s2">&quot;target_argument_position&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
        <span class="s2">&quot;target_property&quot;</span><span class="p">:</span> <span class="s2">&quot;input_prop&quot;</span>
      <span class="p">}</span>
    <span class="p">],</span>
    <span class="s2">&quot;output_mapping&quot;</span> <span class="p">:</span> <span class="p">[</span>
      <span class="p">{</span>
        <span class="s2">&quot;service_method_output_path&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="s2">&quot;output_prop&quot;</span><span class="p">],</span>
        <span class="s2">&quot;target_property&quot;</span><span class="p">:</span> <span class="s2">&quot;option1&quot;</span>
      <span class="p">}</span>
    <span class="p">]</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="display-text-file-display-yaml">
<h2><a class="toc-backref" href="#id22">Display Text file (<code class="docutils literal notranslate"><span class="pre">display.yaml</span></code>)</a><a class="headerlink" href="#display-text-file-display-yaml" title="Permalink to this headline">¶</a></h2>
<p>The <code class="docutils literal notranslate"><span class="pre">display.yaml</span></code> file controls how information is displayed in the narrative and in the app catalog.</p>
<div class="align-center figure" id="id9">
<img alt="../_images/View_flux_network_narr.png" src="../_images/View_flux_network_narr.png" />
<p class="caption"><span class="caption-text">View Flux Network App in a narrative.</span></p>
</div>
<div class="align-center figure" id="id10">
<a class="reference internal image-reference" href="../_images/ViewFluxNetwork_cat.png"><img alt="../_images/ViewFluxNetwork_cat.png" src="../_images/ViewFluxNetwork_cat.png" style="width: 90%;" /></a>
<p class="caption"><span class="caption-text">App Catalog for View Flux Network.</span></p>
</div>
<p>This file has Yaml format. Here is the list of top-level block names:</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">name:</th><td class="field-body">name of method listed in UI</td>
</tr>
<tr class="field-even field"><th class="field-name">tooltip:</th><td class="field-body">more detailed explanation about the method shown on mouse-over event</td>
</tr>
<tr class="field-odd field"><th class="field-name">screenshots:</th><td class="field-body">list of names of screenshot files from <code class="docutils literal notranslate"><span class="pre">img</span></code> sub-folder</td>
</tr>
<tr class="field-even field"><th class="field-name">icon:</th><td class="field-body">(optional) - name of icon file from <code class="docutils literal notranslate"><span class="pre">img</span></code> sub-folder - <a class="reference external" href="https://github.com/kbaseapps/fba_tools/blob/master/ui/narrative/methods/build_metabolic_model/display.yaml">Example</a></td>
</tr>
<tr class="field-odd field"><th class="field-name" colspan="2">method-suggestions:</th></tr>
<tr class="field-odd field"><td>&#160;</td><td class="field-body">list of objects defining the set of other methods that could be suggested to the user as related ones; there are two sub-elements <code class="docutils literal notranslate"><span class="pre">related</span></code> and <code class="docutils literal notranslate"><span class="pre">next</span></code> pointing to arrays of method IDs</td>
</tr>
<tr class="field-even field"><th class="field-name">parameters:</th><td class="field-body">a map from parameter IDs defined in <code class="docutils literal notranslate"><span class="pre">spec.json</span></code> to objects designed to add textual information to these parameters (see details below)</td>
</tr>
<tr class="field-odd field"><th class="field-name">description:</th><td class="field-body">very detailed explanation about what and how the method does; it appears on separate web page describing this method</td>
</tr>
<tr class="field-even field"><th class="field-name">publications:</th><td class="field-body">(optional) - list of objects describing publications; each object includes two fields: <code class="docutils literal notranslate"><span class="pre">display-text</span></code> containing reference to scientific journal and <code class="docutils literal notranslate"><span class="pre">link</span></code> with URL to online resource - <a class="reference external" href="https://github.com/kbaseapps/fba_tools/blob/master/ui/narrative/methods/build_metabolic_model/display.yaml">Example</a></td>
</tr>
</tbody>
</table>
<p>Each parameter is a pair in parameter map linking ID of this parameter (the only key of ) and textual object having following fields:</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">ui-name:</th><td class="field-body">name of parameter used to show given parameter in UI</td>
</tr>
<tr class="field-even field"><th class="field-name">short-hint:</th><td class="field-body">short description shown in front of each parameter on right side of method input panel in Narrative</td>
</tr>
<tr class="field-odd field"><th class="field-name">long-hint:</th><td class="field-body">more detailed explanation available by mouse-over on question-mark sign (in case it’s the same as short-hint question-mark is not shown)</td>
</tr>
<tr class="field-even field"><th class="field-name">placeholder:</th><td class="field-body">(optional) - in case of parameter type is textual (one of <code class="docutils literal notranslate"><span class="pre">text</span></code>, <code class="docutils literal notranslate"><span class="pre">textarea</span></code>, <code class="docutils literal notranslate"><span class="pre">textsubdata</span></code>) it defines placeholder text shown in gray color explaining the meaning of value user is going to set. - <a class="reference external" href="https://github.com/kbaseapps/fba_tools/blob/master/ui/narrative/methods/build_metabolic_model/display.yaml">Example</a></td>
</tr>
</tbody>
</table>
</div>
</div>


           </div>
           
          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2018, KBase.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../',
            VERSION:'0.1.18',
            LANGUAGE:'None',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="../_static/jquery.js"></script>
      <script type="text/javascript" src="../_static/underscore.js"></script>
      <script type="text/javascript" src="../_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="../_static/js/theme.js"></script>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>